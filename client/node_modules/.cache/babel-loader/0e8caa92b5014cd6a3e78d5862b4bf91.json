{"ast":null,"code":"var _jsxFileName = \"/home/alan/Escritorio/Integra/IntegraApp/src/components/Medic/PrescriptionsAndOrders/PrescriptionsAndOrders.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getAffiliates } from '../../../actions/getter.action';\nimport supabase from '../../../supabase.config';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport { FormControl, InputLabel, MenuItem, Paper, Select, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TextField } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  title2: {\n    width: '100%',\n    background: lighten('#34a7a1', 0.6),\n    fontWeight: 'bold',\n    fontSize: '1.4rem',\n    color: '#fafafa',\n    textAlign: 'center',\n    backgroundColor: 'rgb(112, 193, 189)',\n    padding: '10px'\n  },\n  title: {\n    color: '#212121',\n    fontWeight: 'bold',\n    backgroundColor: lighten('#34a7a1', 0.6)\n  },\n  rowColor: {\n    backgroundColor: lighten('#e0e0e0', 0.3)\n  },\n  table: {\n    minWidth: 'min-content',\n    top: theme.spacing(0)\n  },\n  formControl: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'flex-end',\n    justifyContent: 'space-around',\n    flexDirection: 'row',\n    backgroundColor: 'rgb(112, 193, 189)',\n    padding: '0px 0px 0px 0px'\n  },\n  selectEmpty: {\n    width: '200px',\n    height: '40px',\n    position: 'relative',\n    display: 'flex',\n    backgroundColor: 'white',\n    margin: '10px 0px 0px 0px',\n    borderRadius: '5px',\n    textAlign: 'left',\n    padding: \"'0px 0px 0px 0px'\"\n  },\n  paper: {\n    width: '100%',\n    position: 'relative'\n  },\n  root: {\n    backgroundColor: 'rgb(112, 193, 189)',\n    width: '100%'\n  },\n  input: {\n    backgroundColor: 'white',\n    borderRadius: '5px'\n  },\n  content: {\n    padding: \"'10px 10px 10px 10px'\"\n  },\n  selectTitle: {\n    color: 'white',\n    fontWeight: 'bold'\n  }\n}));\n\nasync function getData(query) {\n  let {\n    selection,\n    param\n  } = query;\n  let column = selection === 'orders' ? 'study_name' : 'drug_name';\n\n  try {\n    const {\n      data,\n      error: dataError\n    } = await supabase.from(selection).select(`*, medical_consultations(medic_dni, partner: partner_dni(name, lastname))`).ilike(`${column}`, `%${param}%`);\n    return data ? data : dataError;\n  } catch (err) {\n    console.error(err);\n  }\n}\n\nexport default function PrescriptionsAndOrders() {\n  _s();\n\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [data, setData] = useState([]);\n  const [filteredData, setFilteredData] = useState(data);\n  const [query, setQuery] = useState({\n    param: '',\n    selection: 'prescriptions'\n  });\n  const [name, setName] = useState('');\n  const partners = useSelector(state => state.affiliates.allAffiliates);\n  const allAffiliates = partners.filter(e => data.find(d => d.medical_consultations.partner.lastname == e.lastname));\n  const medicData = JSON.parse(localStorage.getItem('medicdata'));\n\n  const handleChange = event => {\n    setQuery({ ...query,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleChangeName = event => {\n    setName(event.target.value);\n  };\n\n  useEffect(() => {\n    dispatch(getAffiliates());\n    getData(query).then(r => setData(r.filter(e => e.medical_consultations.medic_dni === medicData.dni)), err => console.log(err));\n  }, [query]);\n  useEffect(() => {\n    setFilteredData(data);\n  }, [data]);\n  useEffect(() => {\n    let newData = data;\n    if (name.length) newData = newData.filter(e => e.medical_consultations.partner.lastname == name);\n    if (!newData.length) newData = data;\n    setFilteredData(newData);\n  }, [name, data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.formControl,\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.selectTitle,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: classes.content,\n            children: \"Selecci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            className: classes.selectEmpty,\n            variant: \"outlined\"\n            /* labelId='demo-simple-select-label'\n            id='demo-simple-select-label' */\n            ,\n            value: query.selection,\n            onChange: handleChange,\n            name: \"selection\",\n            size: \"small\",\n            type: \"text\",\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"orders\",\n              children: \"Ordenes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"prescriptions\",\n              children: \"Recetas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.selectTitle,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: classes.content,\n            children: \"Paciente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            className: classes.selectEmpty,\n            variant: \"outlined\"\n            /*  labelId='demo-simple-select-label-1'\n            id='demo-simple-select-label-1' */\n            ,\n            value: name,\n            onChange: handleChangeName,\n            name: \"name\",\n            size: \"small\",\n            type: \"text\",\n            name: \"selection\",\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"Paciente...\",\n              \"aria-label\": \"None\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this), allAffiliates.map(e => /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: e.lastname,\n              children: e.lastname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        className: classes.formControl,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          className: classes.input,\n          onChange: handleChange,\n          name: \"param\",\n          id: \"outlined-basic\",\n          label: query.selection === 'orders' ? 'Estudio...' : 'Medicamento...',\n          variant: \"outlined\",\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      children: /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: classes.title2,\n          children: query.selection === 'orders' ? 'ORDENES' : 'RECETAS'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          className: classes.table,\n          \"aria-label\": \"simple table\",\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            className: classes.title,\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                size: \"small\",\n                children: query.selection === 'orders' ? 'ORDEN Nº' : 'RECETA Nº'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: \"CONSULTA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: \"FECHA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: query.selection === 'orders' ? 'ESTUDIO' : 'MEDICAMENTO'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 33\n              }, this), query.selection === 'orders' ? /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: \"ESTADO\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 37\n              }, this) : null, /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: \"PACIENTE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: filteredData.length > 0 ? filteredData.map((row, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n              size: \"small\",\n              className: index % 2 === 1 ? classes.rowColor : null,\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"th\",\n                scope: \"row\",\n                size: \"small\",\n                children: row.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 43\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: row.medical_consultation_id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 43\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: row.date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 43\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: query.selection === 'orders' ? row.study_name : row.drug_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 43\n              }, this), query.selection === 'orders' ? /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: row.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 47\n              }, this) : null, /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"left\",\n                size: \"small\",\n                children: row.medical_consultations.partner.name + ' ' + row.medical_consultations.partner.lastname\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 43\n              }, this)]\n            }, row.name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 39\n            }, this)) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PrescriptionsAndOrders, \"q2X0Dhy6JAieJYemXadcz2LfBl0=\", false, function () {\n  return [useStyles, useDispatch, useSelector];\n});\n\n_c = PrescriptionsAndOrders;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrescriptionsAndOrders\");","map":{"version":3,"sources":["/home/alan/Escritorio/Integra/IntegraApp/src/components/Medic/PrescriptionsAndOrders/PrescriptionsAndOrders.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","getAffiliates","supabase","lighten","makeStyles","FormControl","InputLabel","MenuItem","Paper","Select","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TextField","useStyles","theme","title2","width","background","fontWeight","fontSize","color","textAlign","backgroundColor","padding","title","rowColor","table","minWidth","top","spacing","formControl","position","display","alignItems","justifyContent","flexDirection","selectEmpty","height","margin","borderRadius","paper","root","input","content","selectTitle","getData","query","selection","param","column","data","error","dataError","from","select","ilike","err","console","PrescriptionsAndOrders","classes","dispatch","setData","filteredData","setFilteredData","setQuery","name","setName","partners","state","affiliates","allAffiliates","filter","e","find","d","medical_consultations","partner","lastname","medicData","JSON","parse","localStorage","getItem","handleChange","event","target","value","handleChangeName","then","r","medic_dni","dni","log","newData","length","map","row","index","id","medical_consultation_id","date","study_name","drug_name","status"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getAffiliates } from '../../../actions/getter.action';\nimport supabase from '../../../supabase.config';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport {\n    FormControl,\n    InputLabel,\n    MenuItem,\n    Paper,\n    Select,\n    Table,\n    TableBody,\n    TableCell,\n    TableContainer,\n    TableHead,\n    TableRow,\n    TextField,\n} from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n    title2: {\n        width: '100%',\n        background: lighten('#34a7a1', 0.6),\n        fontWeight: 'bold',\n        fontSize: '1.4rem',\n        color: '#fafafa',\n        textAlign: 'center',\n        backgroundColor: 'rgb(112, 193, 189)',\n        padding: '10px',\n    },\n    title: {\n        color: '#212121',\n        fontWeight: 'bold',\n        backgroundColor: lighten('#34a7a1', 0.6),\n    },\n    rowColor: {\n        backgroundColor: lighten('#e0e0e0', 0.3),\n    },\n    table: {\n        minWidth: 'min-content',\n        top: theme.spacing(0),\n    },\n    formControl: {\n        position: 'relative',\n        display: 'flex',\n        alignItems: 'flex-end',\n        justifyContent: 'space-around',\n        flexDirection: 'row',\n        backgroundColor: 'rgb(112, 193, 189)',\n        padding: '0px 0px 0px 0px',\n    },\n    selectEmpty: {\n        width: '200px',\n        height: '40px',\n        position: 'relative',\n        display: 'flex',\n        backgroundColor: 'white',\n        margin: '10px 0px 0px 0px',\n        borderRadius: '5px',\n        textAlign: 'left',\n        padding: \"'0px 0px 0px 0px'\",\n    },\n    paper: {\n        width: '100%',\n        position: 'relative',\n    },\n    root: {\n        backgroundColor: 'rgb(112, 193, 189)',\n        width: '100%',\n    },\n    input: {\n        backgroundColor: 'white',\n        borderRadius: '5px',\n    },\n    content: {\n        padding: \"'10px 10px 10px 10px'\",\n    },\n    selectTitle: {\n        color: 'white',\n        fontWeight: 'bold',\n    },\n}));\n\nasync function getData(query) {\n    let { selection, param } = query;\n    let column = selection === 'orders' ? 'study_name' : 'drug_name';\n    try {\n        const { data, error: dataError } = await supabase\n            .from(selection)\n            .select(\n                `*, medical_consultations(medic_dni, partner: partner_dni(name, lastname))`\n            )\n            .ilike(`${column}`, `%${param}%`);\n        return data ? data : dataError;\n    } catch (err) {\n        console.error(err);\n    }\n}\n\nexport default function PrescriptionsAndOrders() {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [data, setData] = useState([]);\n    const [filteredData, setFilteredData] = useState(data);\n    const [query, setQuery] = useState({\n        param: '',\n        selection: 'prescriptions',\n    });\n    const [name, setName] = useState('');\n    const partners = useSelector((state) => state.affiliates.allAffiliates);\n    const allAffiliates = partners.filter((e) =>\n        data.find((d) => d.medical_consultations.partner.lastname == e.lastname)\n    );\n    const medicData = JSON.parse(localStorage.getItem('medicdata'));\n\n    const handleChange = (event) => {\n        setQuery({ ...query, [event.target.name]: event.target.value });\n    };\n\n    const handleChangeName = (event) => {\n        setName(event.target.value);\n    };\n\n    useEffect(() => {\n        dispatch(getAffiliates());\n        getData(query).then(\n            (r) => setData(r.filter(e => e.medical_consultations.medic_dni === medicData.dni )),\n            (err) => console.log(err)\n        );\n    }, [query]);\n\n    useEffect(() => {\n        setFilteredData(data);\n    }, [data]);\n\n    useEffect(() => {\n        let newData = data;\n        if (name.length)\n            newData = newData.filter(\n                (e) => e.medical_consultations.partner.lastname == name\n            );\n        if (!newData.length) newData = data;\n        setFilteredData(newData);\n    }, [name, data]);\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.formControl}>\n                <FormControl className={classes.formControl}>\n                    <div className={classes.selectTitle}>\n                        <p className={classes.content}>Selección</p>\n                        <Select\n                            className={classes.selectEmpty}\n                            variant='outlined'\n                            /* labelId='demo-simple-select-label'\n                            id='demo-simple-select-label' */\n                            value={query.selection}\n                            onChange={handleChange}\n                            name='selection'\n                            size='small'\n                            type='text'\n                        >\n                            <MenuItem value='orders'>Ordenes</MenuItem>\n                            <MenuItem value='prescriptions'>Recetas</MenuItem>\n                        </Select>\n                    </div>\n                </FormControl>\n                <FormControl className={classes.formControl}>\n                    <div className={classes.selectTitle}>\n                        <p className={classes.content}>Paciente</p>\n                        <Select\n                            className={classes.selectEmpty}\n                            variant='outlined'\n                            /*  labelId='demo-simple-select-label-1'\n                        id='demo-simple-select-label-1' */\n                            value={name}\n                            onChange={handleChangeName}\n                            name='name'\n                            size='small'\n                            type='text'\n                            name='selection'\n                        >\n                            <MenuItem value='Paciente...' aria-label='None' />\n                            {allAffiliates.map((e) => (\n                                <MenuItem value={e.lastname}>\n                                    {e.lastname}\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </div>\n                </FormControl>\n                <FormControl className={classes.formControl}>\n                    <TextField\n                        className={classes.input}\n                        onChange={handleChange}\n                        name='param'\n                        id='outlined-basic'\n                        label={\n                            query.selection === 'orders'\n                                ? 'Estudio...'\n                                : 'Medicamento...'\n                        }\n                        variant='outlined'\n                        size='small'\n                    />\n                </FormControl>\n            </div>\n            <div style={{ display: 'flex' }}>\n                <TableContainer component={Paper} className={classes.paper}>\n                    <h3 className={classes.title2}>\n                        {query.selection === 'orders' ? 'ORDENES' : 'RECETAS'}\n                    </h3>\n                    <Table className={classes.table} aria-label='simple table'>\n                        <TableHead className={classes.title}>\n                            <TableRow>\n                                <TableCell size='small'>\n                                    {query.selection === 'orders'\n                                        ? 'ORDEN Nº'\n                                        : 'RECETA Nº'}\n                                </TableCell>\n                                <TableCell align='left' size='small'>\n                                    CONSULTA\n                                </TableCell>\n                                <TableCell align='left' size='small'>\n                                    FECHA\n                                </TableCell>\n                                <TableCell align='left' size='small'>\n                                    {query.selection === 'orders'\n                                        ? 'ESTUDIO'\n                                        : 'MEDICAMENTO'}\n                                </TableCell>\n                                {query.selection === 'orders' ? (\n                                    <TableCell align='left' size='small'>\n                                        ESTADO\n                                    </TableCell>\n                                ) : null}\n                                <TableCell align='left' size='small'>\n                                    PACIENTE\n                                </TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {filteredData.length > 0\n                                ? filteredData.map((row, index) => (\n                                      <TableRow\n                                          size='small'\n                                          key={row.name}\n                                          className={\n                                              index % 2 === 1\n                                                  ? classes.rowColor\n                                                  : null\n                                          }\n                                      >\n                                          <TableCell\n                                              component='th'\n                                              scope='row'\n                                              size='small'\n                                          >\n                                              {row.id}\n                                          </TableCell>\n                                          <TableCell align='left' size='small'>\n                                              {row.medical_consultation_id}\n                                          </TableCell>\n                                          <TableCell align='left' size='small'>\n                                              {row.date}\n                                          </TableCell>\n                                          <TableCell align='left' size='small'>\n                                              {query.selection === 'orders'\n                                                  ? row.study_name\n                                                  : row.drug_name}\n                                          </TableCell>\n                                          {query.selection === 'orders' ? (\n                                              <TableCell\n                                                  align='left'\n                                                  size='small'\n                                              >\n                                                  {row.status}\n                                              </TableCell>\n                                          ) : null}\n                                          <TableCell align='left' size='small'>\n                                              {row.medical_consultations.partner\n                                                  .name +\n                                                  ' ' +\n                                                  row.medical_consultations\n                                                      .partner.lastname}\n                                          </TableCell>\n                                      </TableRow>\n                                  ))\n                                : null}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}