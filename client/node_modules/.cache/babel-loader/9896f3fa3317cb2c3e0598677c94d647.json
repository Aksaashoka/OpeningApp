{"ast":null,"code":"var _jsxFileName = \"/home/alan/Escritorio/Integra/IntegraApp/src/components/Medic/Consults/Consult.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport emailjs from 'emailjs-com';\nimport { Button, List, ListItem, Divider, Card, Avatar, TextField, Typography } from '@material-ui/core';\nimport 'firebase/auth';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport Medicines from './Medicines/Medicines.jsx';\nimport PrintMeds from './PrintMeds/PrintMeds.jsx';\nimport Orders from './Orders/Orders.jsx';\nimport PrintOrders from './PrintOrders/PrintOrders.jsx'; // import NewOrderDialog from './NewOrderDialog/NewOrderDialog.jsx';\n// import NewOrder from './NewOrderDialog/NewOrder';\n\nimport supabase from '../../../supabase.config.js';\nimport Swal from 'sweetalert2';\nimport styles from './Consult.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  dividerFullWidth: {\n    margin: `5px 0 0 ${theme.spacing(9)}px`\n  },\n  card: {\n    // maxWidth: '90%',\n    width: '100%'\n  },\n  textField: {\n    width: '84%'\n  },\n  largeAvatar: {\n    width: theme.spacing(7),\n    height: theme.spacing(7)\n  },\n  divider: {\n    listStyleType: 'none'\n  },\n  title: {\n    color: '#fafafa'\n  },\n  mainButton: {\n    color: '#fafafa'\n  }\n}));\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      // Purple and green play nicely together.\n      main: '#41aea9'\n    },\n    secondary: {\n      // This is green.A700 as hex.\n      main: '#11cb5f'\n    }\n  }\n});\nexport default function Consult({\n  firebase\n}) {\n  _s();\n\n  let classes = useStyles(); // Inicialmente se trae los medicamentos del localstorage\n\n  let meds = JSON.parse(localStorage.getItem('medicines')) || [];\n  let [medicines, setMedicines] = useState(meds); // Inicialmente se trae las ordenes del localstorage\n\n  let ords = JSON.parse(localStorage.getItem('orders')) || [];\n  let [orders, setOrders] = useState(ords);\n  var today = new Date();\n  let date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate(); // Se trae la info del doc del localstorage\n\n  let [medic] = useState(JSON.parse(localStorage.getItem('medicdata'))); // Estado local con los datos del paciente\n\n  let [patient, setPatient] = useState(null); // Cuando recarga la página setea los datos del paciente\n  // que obtiene por query.\n\n  useEffect(() => {\n    // Se trae x query la info del paciente\n    let search = window.location.search;\n    let params = new URLSearchParams(search);\n    setPatient({\n      dni: params.get('dni'),\n      name: params.get('name'),\n      lastname: params.get('lastname'),\n      birthdate: params.get('birthdate'),\n      gender: params.get('gender'),\n      email: params.get('email')\n    });\n  }, []); // La información de la consulta se guarda en infObj\n\n  let infObj = {\n    date,\n    doctor: {\n      name: medic.name,\n      lastname: medic.lastname,\n      medical_specialities: medic.medical_specialities,\n      medic_license: medic.medic_license\n    },\n    patient: null,\n    diagnosis: null,\n    medicines,\n    orders\n  }; // Una vez seteados los datos del paciente los guarda\n  // en la info a compartir.\n\n  useEffect(() => {\n    if (patient) {\n      infObj.patient = {\n        name: patient.name,\n        lastname: patient.lastname,\n        plan: patient.plan,\n        affiliate_number: patient.dni\n      };\n    } //eslint-disable-next-line\n\n  }, [patient]);\n\n  const getAge = () => Math.floor((new Date() - new Date(patient.birthdate).getTime()) / 3.15576e10);\n\n  function sendEmailConsult(props) {\n    emailjs.send('service_wcpzjw7', 'template_qkdom45', props, 'user_mgft1j53RDkaGc1EWyKNK').then(result => {\n      console.log('resultado:', result.text);\n    }, error => {\n      console.log('error:', error.text);\n    });\n  } // let [diagnoses, setDiagnoses] = useState([]);\n\n\n  let [input, setInput] = useState({\n    reason: '',\n    diagnosis: '',\n    observations: '',\n    posology: ''\n  });\n  let [errors, setErrors] = useState({\n    reason: false,\n    diagnosis: false,\n    observations: false\n  });\n\n  function validate(inputName, value) {\n    const pattern = /^[A-Za-z0-9\\s]+$/g;\n    let errors = {};\n\n    switch (inputName) {\n      case 'reason':\n        {\n          if (!pattern.test(value) && value.length > 0) {\n            errors.reason = true;\n          } else {\n            errors.reason = false;\n          }\n\n          break;\n        }\n\n      case 'diagnosis':\n        {\n          if (!pattern.test(value) && value.length > 0) {\n            errors.diagnosis = true;\n          } else {\n            errors.diagnosis = false;\n          }\n\n          break;\n        }\n\n      case 'observations':\n        {\n          if (!pattern.test(value)) {\n            errors.observations = true;\n          } else {\n            errors.observations = false;\n          }\n\n          break;\n        }\n\n      default:\n        return null;\n    }\n\n    return errors;\n  }\n\n  const handleInputChange = e => {\n    setErrors(validate(e.target.name, e.target.value));\n    setInput({ ...input,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async () => {\n    let medicines = JSON.parse(localStorage.getItem('medicines'));\n    let orders = JSON.parse(localStorage.getItem('orders'));\n\n    if (!errors.reason && !errors.diagnosis && !errors.observations) {\n      const {\n        data: newConsult\n      } = await supabase.from('medical_consultations').insert([{\n        partner_dni: patient.dni,\n        medic_dni: medic.dni,\n        reason: input.reason,\n        diagnosis: input.diagnosis,\n        observations: input.observations\n      }]);\n      let consultationId = newConsult[0].id;\n\n      if (newConsult) {\n        if (medicines.length) {\n          sendEmailConsult({\n            dr: medic,\n            patient: patient,\n            date,\n            consult: input,\n            prescriptions: medicines.join(' ')\n          });\n        } else {\n          sendEmailConsult({\n            dr: medic,\n            patient: patient,\n            date,\n            consult: input,\n            prescriptions: 'nada'\n          });\n        }\n      }\n\n      if (medicines.length) {\n        await supabase.from('prescriptions').insert([{\n          medical_consultation_id: consultationId,\n          drug_name: medicines[0],\n          date: date,\n          drug_name_2: medicines.length > 1 ? medicines[1] : '',\n          partner_dni: patient.dni\n        }]);\n      }\n\n      if (orders) {\n        await supabase.from('orders').insert([{\n          medical_consultation_id: consultationId,\n          study_name: orders[0],\n          date: date,\n          partner_dni: patient.dni,\n          status: 'en espera de autorizacion',\n          medic_dni: medic.dni\n        }]);\n      }\n\n      Swal.fire({\n        title: 'Hecho!',\n        text: 'La consulta fué subida correctamente',\n        icon: 'success',\n        showConfirmButton: true,\n        reverseButtons: true\n      }).then(el => {\n        if (el.isConfirmed) {\n          localStorage.removeItem('medicines');\n          localStorage.removeItem('orders');\n          let new_window = window.open(window.location, '_self');\n          new_window.close();\n        }\n      }); // sendEmailConsult({dr:medic, patient: patientData, date:today, consult: input})\n    } else {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Revisa los campos!'\n      });\n    }\n  }; // Al cambiar una medicina guarda\n  // en la info a compartir a Medicines.jsx.\n\n\n  useEffect(() => {\n    if (medicines.length) {\n      infObj.medicines = medicines;\n    } //eslint-disable-next-line\n\n  }, [medicines]); // Función que obtiene las modificaciones de los medicamentos\n  // traidas del componente Medicines\n\n  function getterMed(arr) {\n    setMedicines(arr);\n    return;\n  } // Una vez seteados los cambios de medicamentos los guarda\n  // en la info a compartir.\n\n\n  useEffect(() => {\n    if (medicines.length) {\n      infObj.medicines = medicines;\n    } //eslint-disable-next-line\n\n  }, [medicines]); // Función que obtiene las modificaciones de las órdenes\n  // traidas del componente Medicines\n\n  function getterOrder(arr) {\n    setOrders(arr);\n    return;\n  } // Una vez seteados los cambios de medicamentos los guarda\n  // en la info a compartir.\n\n\n  useEffect(() => {\n    if (orders.length) {\n      infObj.orders = orders;\n    } //eslint-disable-next-line\n\n  }, [orders]);\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.cardContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.section,\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Consulta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.formContainer,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: classes.card,\n          children: [medic && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.medicData,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.medicFirstColumn,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Avatar, {\n                    alt: medic.name,\n                    src: medic.profilePic,\n                    className: classes.largeAvatar\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"h5\",\n                    component: \"h2\",\n                    children: [medic.name, \" \", medic.lastname]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.medicSecondColumn,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"subtitle1\",\n                    component: \"h2\",\n                    children: medic.medic_license\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"subtitle1\",\n                    component: \"h2\",\n                    children: medic.medical_specialities[0].name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            component: \"li\",\n            className: classes.divider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 29\n          }, this), patient && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.patientData,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.patientFirstColumn,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"h6\",\n                    component: \"h2\",\n                    children: \"Paciente:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 407,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"h5\",\n                    component: \"h2\",\n                    children: [patient.name, \" \", patient.lastname]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.patientSecondColumn,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"subtitle1\",\n                    component: \"h2\",\n                    children: [\"DNI: \", patient.dni]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"subtitle1\",\n                    component: \"h2\",\n                    children: [\"Edad: \", getAge()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    gutterBottom: true,\n                    variant: \"subtitle1\",\n                    component: \"h2\",\n                    children: [\"Sexo: \", patient.gender]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            component: \"li\",\n            className: classes.divider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.form,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.input,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                id: \"reason-input\",\n                name: \"reason\",\n                label: \"Raz\\xF3n de consulta\",\n                variant: \"outlined\",\n                multiline: true,\n                value: input.reason,\n                rows: 6,\n                className: classes.textField,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.input,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                id: \"diagnosis-input\",\n                name: \"diagnosis\",\n                className: classes.textField,\n                label: \"Diagn\\xF3stico\",\n                variant: \"outlined\" // value={input.diagnosis}\n                ,\n                multiline: true,\n                rows: 6,\n                className: classes.textField,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.input,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                id: \"ovservations-input\",\n                name: \"observations\",\n                label: \"Observaciones\",\n                variant: \"outlined\",\n                value: input.observations,\n                multiline: true,\n                rows: 6,\n                className: classes.textField,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            component: \"li\",\n            className: classes.divider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.medicines,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.mydiv,\n              autoFocus: true,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.mydivt,\n                children: \"Medicaci\\xF3n indicada:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 37\n              }, this), medicines && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: !!medicines.length && medicines.map((med, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: styles.limed,\n                    children: med\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 517,\n                    columnNumber: 57\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.onelinebtns,\n                children: [/*#__PURE__*/_jsxDEV(Medicines, {\n                  handleEvent: getterMed\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 41\n                }, this), patient && /*#__PURE__*/_jsxDEV(PrintMeds, {\n                  info: infObj\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 527,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.mydiv2,\n              autoFocus: true,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.mydivt2,\n                children: \"Posolog\\xEDa y administraci\\xF3n:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"posologia-input\",\n                name: \"posology\",\n                className: styles.posinput,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                name: \"guardar\",\n                className: styles.btnprint,\n                size: \"small\",\n                variant: \"outlined\",\n                color: \"primary\",\n                children: \"Imprimir\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            component: \"li\",\n            className: classes.divider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.orders,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.mydiv,\n              autoFocus: true,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.mydivt,\n                children: \"Estudios solicitados:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 37\n              }, this), orders && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: !!orders.length && orders.map((med, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: styles.limed,\n                    children: med\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 57\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.onelinebtns,\n                children: [/*#__PURE__*/_jsxDEV(Orders, {\n                  handleEvent: getterOrder\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 41\n                }, this), patient && /*#__PURE__*/_jsxDEV(PrintOrders, {\n                  info: infObj\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.mydiv2,\n              autoFocus: true,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.mydivt2,\n                children: \"Indicaciones para la realizaci\\xF3n de los estudios:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"indicaciones-input\",\n                name: \"instructions\",\n                className: styles.posinput,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                name: \"guardar\",\n                className: styles.btnprint,\n                size: \"small\",\n                variant: \"outlined\",\n                color: \"primary\",\n                children: \"Imprimir\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {\n            component: \"li\",\n            className: classes.divider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.buttons,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.btn,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                className: classes.mainButton,\n                variant: \"contained\",\n                size: \"large\",\n                color: \"primary\",\n                onClick: handleSubmit,\n                children: \"Subir consulta\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 343,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Consult, \"Z+6W+lP6TN67/DUFk0S06qSydlE=\", false, function () {\n  return [useStyles];\n});\n\n_c = Consult;\n\nvar _c;\n\n$RefreshReg$(_c, \"Consult\");","map":{"version":3,"sources":["/home/alan/Escritorio/Integra/IntegraApp/src/components/Medic/Consults/Consult.jsx"],"names":["React","useState","useEffect","emailjs","Button","List","ListItem","Divider","Card","Avatar","TextField","Typography","makeStyles","ThemeProvider","createMuiTheme","Medicines","PrintMeds","Orders","PrintOrders","supabase","Swal","styles","useStyles","theme","dividerFullWidth","margin","spacing","card","width","textField","largeAvatar","height","divider","listStyleType","title","color","mainButton","palette","primary","main","secondary","Consult","firebase","classes","meds","JSON","parse","localStorage","getItem","medicines","setMedicines","ords","orders","setOrders","today","Date","date","getFullYear","getMonth","getDate","medic","patient","setPatient","search","window","location","params","URLSearchParams","dni","get","name","lastname","birthdate","gender","email","infObj","doctor","medical_specialities","medic_license","diagnosis","plan","affiliate_number","getAge","Math","floor","getTime","sendEmailConsult","props","send","then","result","console","log","text","error","input","setInput","reason","observations","posology","errors","setErrors","validate","inputName","value","pattern","test","length","handleInputChange","e","target","handleSubmit","data","newConsult","from","insert","partner_dni","medic_dni","consultationId","id","dr","consult","prescriptions","join","medical_consultation_id","drug_name","drug_name_2","study_name","status","fire","icon","showConfirmButton","reverseButtons","el","isConfirmed","removeItem","new_window","open","close","getterMed","arr","getterOrder","cardContainer","section","formContainer","medicData","medicFirstColumn","profilePic","medicSecondColumn","patientData","patientFirstColumn","patientSecondColumn","form","mydiv","mydivt","map","med","index","limed","onelinebtns","mydiv2","mydivt2","posinput","btnprint","buttons","btn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport emailjs from 'emailjs-com';\nimport {\n    Button,\n    List,\n    ListItem,\n    Divider,\n    Card,\n    Avatar,\n    TextField,\n    Typography,\n} from '@material-ui/core';\nimport 'firebase/auth';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport Medicines from './Medicines/Medicines.jsx';\nimport PrintMeds from './PrintMeds/PrintMeds.jsx';\nimport Orders from './Orders/Orders.jsx';\nimport PrintOrders from './PrintOrders/PrintOrders.jsx';\n// import NewOrderDialog from './NewOrderDialog/NewOrderDialog.jsx';\n// import NewOrder from './NewOrderDialog/NewOrder';\nimport supabase from '../../../supabase.config.js';\nimport Swal from 'sweetalert2';\nimport styles from './Consult.module.css';\n\nconst useStyles = makeStyles((theme) => ({\n    dividerFullWidth: {\n        margin: `5px 0 0 ${theme.spacing(9)}px`,\n    },\n    card: {\n        // maxWidth: '90%',\n        width:'100%',\n    },\n    textField: {\n        width: '84%',\n    },\n    largeAvatar: {\n        width: theme.spacing(7),\n        height: theme.spacing(7),\n    },\n    divider:{\n        listStyleType:'none',\n    },\n    title:{\n        color:'#fafafa',\n    },\n    mainButton:{\n        color:'#fafafa',\n    }\n}));\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            // Purple and green play nicely together.\n            main: '#41aea9',\n        },\n        secondary: {\n            // This is green.A700 as hex.\n            main: '#11cb5f',\n        },\n    },\n});\n\nexport default function Consult({ firebase }) {\n    let classes = useStyles();\n\n    // Inicialmente se trae los medicamentos del localstorage\n    let meds = JSON.parse(localStorage.getItem('medicines')) || [];\n    let [medicines, setMedicines] = useState(meds);\n\n    // Inicialmente se trae las ordenes del localstorage\n    let ords = JSON.parse(localStorage.getItem('orders')) || [];\n    let [orders, setOrders] = useState(ords);\n\n    var today = new Date();\n    let date =\n        today.getFullYear() +\n        '-' +\n        (today.getMonth() + 1) +\n        '-' +\n        today.getDate();\n\n    // Se trae la info del doc del localstorage\n    let [medic] = useState(JSON.parse(localStorage.getItem('medicdata')));\n\n    // Estado local con los datos del paciente\n    let [patient, setPatient] = useState(null);\n\n    // Cuando recarga la página setea los datos del paciente\n    // que obtiene por query.\n    useEffect(() => {\n        // Se trae x query la info del paciente\n        let search = window.location.search;\n        let params = new URLSearchParams(search);\n        setPatient({\n            dni: params.get('dni'),\n            name: params.get('name'),\n            lastname: params.get('lastname'),\n            birthdate: params.get('birthdate'),\n            gender: params.get('gender'),\n            email: params.get('email'),\n        });\n    }, []);\n\n    // La información de la consulta se guarda en infObj\n    let infObj = {\n        date,\n        doctor: {\n            name: medic.name,\n            lastname: medic.lastname,\n            medical_specialities: medic.medical_specialities,\n            medic_license: medic.medic_license,\n        },\n        patient: null,\n        diagnosis: null,\n        medicines,\n        orders,\n    };\n\n    // Una vez seteados los datos del paciente los guarda\n    // en la info a compartir.\n    useEffect(() => {\n        if (patient) {\n            infObj.patient = {\n                name: patient.name,\n                lastname: patient.lastname,\n                plan: patient.plan,\n                affiliate_number: patient.dni,\n            };\n        }\n        //eslint-disable-next-line\n    }, [patient]);\n\n    const getAge = () =>\n        Math.floor(\n            (new Date() - new Date(patient.birthdate).getTime()) / 3.15576e10\n        );\n\n    function sendEmailConsult(props) {\n        emailjs\n            .send(\n                'service_wcpzjw7',\n                'template_qkdom45',\n                props,\n                'user_mgft1j53RDkaGc1EWyKNK'\n            )\n            .then(\n                (result) => {\n                    console.log('resultado:', result.text);\n                },\n                (error) => {\n                    console.log('error:', error.text);\n                }\n            );\n    }\n\n    // let [diagnoses, setDiagnoses] = useState([]);\n\n    let [input, setInput] = useState({\n        reason: '',\n        diagnosis: '',\n        observations: '',\n        posology: '',\n    });\n\n    let [errors, setErrors] = useState({\n        reason: false,\n        diagnosis: false,\n        observations: false,\n    });\n\n    function validate(inputName, value) {\n        const pattern = /^[A-Za-z0-9\\s]+$/g;\n        let errors = {};\n\n        switch (inputName) {\n            case 'reason': {\n                if (!pattern.test(value) && value.length > 0) {\n                    errors.reason = true;\n                } else {\n                    errors.reason = false;\n                }\n                break;\n            }\n            case 'diagnosis': {\n                if (!pattern.test(value) && value.length > 0) {\n                    errors.diagnosis = true;\n                } else {\n                    errors.diagnosis = false;\n                }\n                break;\n            }\n            case 'observations': {\n                if (!pattern.test(value)) {\n                    errors.observations = true;\n                } else {\n                    errors.observations = false;\n                }\n                break;\n            }\n            default:\n                return null;\n        }\n        return errors;\n    }\n\n    const handleInputChange = (e) => {\n        setErrors(validate(e.target.name, e.target.value));\n        setInput({\n            ...input,\n            [e.target.name]: e.target.value,\n        });\n    };\n\n    const handleSubmit = async () => {\n        let medicines = JSON.parse(localStorage.getItem('medicines'));\n        let orders = JSON.parse(localStorage.getItem('orders'));\n        if (!errors.reason && !errors.diagnosis && !errors.observations) {\n            const { data: newConsult } = await supabase\n                .from('medical_consultations')\n                .insert([\n                    {\n                        partner_dni: patient.dni,\n                        medic_dni: medic.dni,\n                        reason: input.reason,\n                        diagnosis: input.diagnosis,\n                        observations: input.observations,\n                    },\n                ]);\n\n            let consultationId = newConsult[0].id;\n            if (newConsult) {\n                if (medicines.length) {\n                    sendEmailConsult({\n                        dr: medic,\n                        patient: patient,\n                        date,\n                        consult: input,\n                        prescriptions: medicines.join(' '),\n                    });\n                } else {\n                    sendEmailConsult({\n                        dr: medic,\n                        patient: patient,\n                        date,\n                        consult: input,\n                        prescriptions: 'nada',\n                    });\n                }\n            }\n            if (medicines.length) {\n                await supabase.from('prescriptions').insert([\n                    {\n                        medical_consultation_id: consultationId,\n                        drug_name: medicines[0],\n                        date: date,\n                        drug_name_2: medicines.length > 1 ? medicines[1] : '',\n                        partner_dni: patient.dni,\n                    },\n                ]);\n            }\n            if (orders) {\n                await supabase.from('orders').insert([\n                    {\n                        medical_consultation_id: consultationId,\n                        study_name: orders[0],\n                        date: date,\n                        partner_dni: patient.dni,\n                        status: 'en espera de autorizacion',\n                        medic_dni: medic.dni,\n                    },\n                ]);\n            }\n            Swal.fire({\n                title: 'Hecho!',\n                text: 'La consulta fué subida correctamente',\n                icon: 'success',\n                showConfirmButton: true,\n                reverseButtons: true,\n            }).then((el) => {\n                if (el.isConfirmed) {\n                    localStorage.removeItem('medicines');\n                    localStorage.removeItem('orders');\n                    let new_window = window.open(window.location, '_self');\n                    new_window.close();\n                }\n            });\n\n            // sendEmailConsult({dr:medic, patient: patientData, date:today, consult: input})\n        } else {\n            Swal.fire({\n                icon: 'error',\n                title: 'Error',\n                text: 'Revisa los campos!',\n            });\n        }\n    };\n\n    // Al cambiar una medicina guarda\n    // en la info a compartir a Medicines.jsx.\n    useEffect(() => {\n        if (medicines.length) {\n            infObj.medicines = medicines;\n        }\n        //eslint-disable-next-line\n    }, [medicines]);\n\n    // Función que obtiene las modificaciones de los medicamentos\n    // traidas del componente Medicines\n    function getterMed(arr) {\n        setMedicines(arr);\n        return;\n    }\n\n    // Una vez seteados los cambios de medicamentos los guarda\n    // en la info a compartir.\n    useEffect(() => {\n        if (medicines.length) {\n            infObj.medicines = medicines;\n        }\n        //eslint-disable-next-line\n    }, [medicines]);\n\n    // Función que obtiene las modificaciones de las órdenes\n    // traidas del componente Medicines\n    function getterOrder(arr) {\n        setOrders(arr);\n        return;\n    }\n\n    // Una vez seteados los cambios de medicamentos los guarda\n    // en la info a compartir.\n    useEffect(() => {\n        if (orders.length) {\n            infObj.orders = orders;\n        }\n        //eslint-disable-next-line\n    }, [orders]);\n\n    return (\n        <ThemeProvider theme={theme}>\n            <div className={styles.cardContainer}>\n                <section className={styles.section}>\n                    <h2>Consulta</h2>\n                </section>\n                <div className={styles.formContainer}>\n                    <Card className={classes.card}>\n                        {/* <List> */}\n                            {medic && (\n                                <div className={styles.medicData}>\n                                    <div className={styles.medicFirstColumn}>\n                                        <div>\n                                            <ListItem>\n                                                <Avatar\n                                                    alt={medic.name}\n                                                    src={medic.profilePic}\n                                                    className={classes.largeAvatar}\n                                                />\n                                            </ListItem>\n                                        </div>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='h5'\n                                                    component='h2'\n                                                >\n                                                    {medic.name} {medic.lastname}\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                    </div>\n                                    <div className={styles.medicSecondColumn}>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='subtitle1'\n                                                    component='h2'\n                                                >\n                                                    {medic.medic_license}\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='subtitle1'\n                                                    component='h2'\n                                                >\n                                                    {medic.medical_specialities[0].name}\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n                            <Divider component='li' className={classes.divider}/>\n                            {patient && (\n                                <div className={styles.patientData}>\n                                    <div className={styles.patientFirstColumn}>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='h6'\n                                                    component='h2'\n                                                >\n                                                    Paciente:\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='h5'\n                                                    component='h2'\n                                                >\n                                                    {patient.name} {patient.lastname}\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                    </div>\n                                    <div className={styles.patientSecondColumn}>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='subtitle1'\n                                                    component='h2'\n                                                >\n                                                    DNI: {patient.dni}\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='subtitle1'\n                                                    component='h2'\n                                                >\n                                                    Edad: {getAge()}\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                        <div>\n                                            <ListItem>\n                                                <Typography\n                                                    gutterBottom\n                                                    variant='subtitle1'\n                                                    component='h2'\n                                                >\n                                                    Sexo: {patient.gender}\n                                                </Typography>\n                                            </ListItem>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n                            <Divider component='li' className={classes.divider} />\n                            <div className={styles.form}>\n                                <div className={styles.input}>\n                                    <TextField\n                                        id='reason-input'\n                                        name='reason'\n                                        label='Razón de consulta'\n                                        variant='outlined'\n                                        multiline\n                                        value={input.reason}\n                                        rows={6}\n                                        className={classes.textField}\n                                        onChange={handleInputChange}\n                                    />\n                                </div>\n                                <div className={styles.input}>\n                                    <TextField\n                                        id='diagnosis-input'\n                                        name='diagnosis'\n                                        className={classes.textField}\n                                        label='Diagnóstico'\n                                        variant='outlined'\n                                        // value={input.diagnosis}\n                                        multiline\n                                        rows={6}\n                                        className={classes.textField}\n                                        onChange={handleInputChange}\n                                    />\n                                </div>\n                                <div className={styles.input}>\n                                    <TextField\n                                        id='ovservations-input'\n                                        name='observations'\n                                        label='Observaciones'\n                                        variant='outlined'\n                                        value={input.observations}\n                                        multiline\n                                        rows={6}\n                                        className={classes.textField}\n                                        onChange={handleInputChange}\n                                    />\n                                </div>\n                            </div>\n                            <Divider component='li' className={classes.divider} />\n                            <div className={styles.medicines}>\n                                <div className={styles.mydiv} autoFocus>\n                                    <p className={styles.mydivt}>Medicación indicada:</p>\n                                    {medicines && (\n                                        <div>\n                                            <ul>\n                                                {!!medicines.length &&\n                                                    medicines.map((med, index) => (\n                                                        <li\n                                                            className={styles.limed}\n                                                            key={index}\n                                                        >\n                                                            {med}\n                                                        </li>\n                                                    ))}\n                                            </ul>\n                                        </div>\n                                    )}\n                                    <div className={styles.onelinebtns}>\n                                        <Medicines handleEvent={getterMed} />\n                                        {patient && <PrintMeds info={infObj} />}\n                                    </div>\n                                </div>\n                                <div className={styles.mydiv2} autoFocus>\n                                    <p className={styles.mydivt2}>\n                                        Posología y administración:\n                                    </p>\n                                    <input\n                                        id='posologia-input'\n                                        name='posology'\n                                        className={styles.posinput}\n                                        onChange={handleInputChange}\n                                    />\n                                    <Button\n                                        name='guardar'\n                                        className={styles.btnprint}\n                                        size='small'\n                                        variant='outlined'\n                                        color='primary'\n                                    >\n                                        Imprimir\n                                    </Button>\n                                </div>\n                            </div>\n                            <Divider component='li' className={classes.divider} />\n                            <div className={styles.orders}>\n                                <div className={styles.mydiv} autoFocus>\n                                    <p className={styles.mydivt}>Estudios solicitados:</p>\n                                    {orders && (\n                                        <div>\n                                            <ul>\n                                                {!!orders.length &&\n                                                    orders.map((med, index) => (\n                                                        <li\n                                                            className={styles.limed}\n                                                            key={index}\n                                                        >\n                                                            {med}\n                                                        </li>\n                                                    ))}\n                                            </ul>\n                                        </div>\n                                    )}\n                                    <div className={styles.onelinebtns}>\n                                        <Orders handleEvent={getterOrder} />\n                                        {patient && <PrintOrders info={infObj} />}\n                                    </div>\n                                </div>\n                                <div className={styles.mydiv2} autoFocus>\n                                    <p className={styles.mydivt2}>\n                                        Indicaciones para la realización de los estudios:\n                                    </p>\n                                    <input\n                                        id='indicaciones-input'\n                                        name='instructions'\n                                        className={styles.posinput}\n                                        onChange={handleInputChange}\n                                    />\n                                    <Button\n                                        name='guardar'\n                                        className={styles.btnprint}\n                                        size='small'\n                                        variant='outlined'\n                                        color='primary'\n                                    >\n                                        Imprimir\n                                    </Button>\n                                </div>\n                            </div>\n                            <Divider component='li' className={classes.divider} />\n                            <div className={styles.buttons}>\n                                <div className={styles.btn}>\n                                    <Button\n                                        className={classes.mainButton}\n                                        variant='contained'\n                                        size='large'\n                                        color='primary'\n                                        onClick={handleSubmit}\n                                    >\n                                        Subir consulta\n                                    </Button>\n                                </div>\n                            </div>\n                        {/* </List> */}\n                    </Card>\n                </div>\n            </div>\n        </ThemeProvider>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}