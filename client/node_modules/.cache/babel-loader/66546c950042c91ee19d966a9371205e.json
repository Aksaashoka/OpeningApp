{"ast":null,"code":"var _jsxFileName = \"/home/alan/Escritorio/Integra/IntegraApp/src/components/Login-Ref/Login/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Select, TextField, MenuItem, CircularProgress, IconButton } from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport PersonIcon from '@material-ui/icons/Person';\nimport HealingIcon from '@material-ui/icons/Healing';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport 'firebase/auth';\nimport { useUser } from 'reactfire';\nimport supabase from '../../../supabase.config.js';\nimport styles from './Login.module.css';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login({\n  firebase\n}) {\n  _s();\n\n  const [role, setRole] = useState(10);\n  const [doc, setDoc] = useState(40);\n  const [input, setInput] = useState({\n    doc: '',\n    pass: ''\n  });\n  const [errors, setErrors] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [picName, setPicName] = useState('');\n  const userFire = useUser();\n  const userData = JSON.parse(localStorage.getItem('userdata'));\n\n  const handleChange = event => {\n    const value = event.target.value;\n    value <= 30 ? setRole(value) : setDoc(value);\n  };\n\n  const handleInput = event => {\n    const value = event.target.value;\n    const id = event.target.id;\n    const regex = /^[0-9\\b]+$/; // this regex is to accept only numbers\n\n    if (id === 'doc') {\n      if ((value === '' || regex.test(value)) && value.length <= 8) setInput({ ...input,\n        doc: value\n      });\n    } else {\n      setInput({ ...input,\n        pass: value\n      });\n    }\n  };\n\n  const handleLogout = async () => {\n    await firebase.auth().signOut();\n    localStorage.clear();\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setInput({\n      doc: '',\n      pass: ''\n    });\n    setLoading(true);\n\n    try {\n      let {\n        data: users\n      } = await supabase.from('users').select('dni, email, role, avatar_url, account').eq('dni', input.doc);\n\n      if (users[0].account === 'inactive') {\n        setLoading(false);\n        return Swal.fire({\n          title: `Error!`,\n          text: `Acceso denegado! Tu cuenta se encuentra inactiva. Contacte al administrador`,\n          icon: 'error',\n          confirmButtonText: 'Entendido!'\n        });\n      }\n\n      const numRole = users[0].role === 'affiliate' ? 10 : users[0].role === 'medic' ? 20 : 30;\n\n      if (numRole !== role) {\n        setLoading(false);\n        return setErrors('Usuario y/o contraseña incorrecto.');\n      } else {\n        setErrors(null);\n      }\n\n      if (users[0].role === 'affiliate') {\n        let {\n          data: userInfo,\n          error: errorFetchUserInfo\n        } = await supabase.from(`partners`).select('name, lastname, family_group, plans (id, name)').eq('dni', users[0].dni);\n\n        if (errorFetchUserInfo) {\n          setLoading(false);\n          return Swal.fire({\n            title: 'Error fetch user.',\n            text: errorFetchUserInfo.message,\n            icon: 'error'\n          });\n        }\n\n        const affiliateData = {\n          name: userInfo[0].name,\n          lastname: userInfo[0].lastname,\n          plan_id: userInfo[0].plans.id,\n          plan_name: userInfo[0].plans.name,\n          family_group: userInfo[0].family_group\n        };\n        localStorage.setItem('affiliatedata', JSON.stringify(affiliateData));\n      }\n\n      if (users[0].role === 'admin') {\n        let {\n          data: userInfo,\n          error: errorFetchUserInfo\n        } = await supabase.from(`admins`).select('name, lastname, root').eq('dni', users[0].dni);\n\n        if (errorFetchUserInfo) {\n          setLoading(false);\n          return Swal.fire({\n            title: 'Error fetch user.',\n            text: errorFetchUserInfo.message,\n            icon: 'error'\n          });\n        }\n\n        const adminData = {\n          name: userInfo[0].name,\n          lastname: userInfo[0].lastname,\n          root: userInfo[0].root\n        };\n        localStorage.setItem('admindata', JSON.stringify(adminData));\n      }\n\n      if (users[0].role === 'medic') {\n        let {\n          data: userInfo,\n          error: errorFetchUserInfo\n        } = await supabase.from(`medics`).select('dni, name, lastname, medic_license, email, phone_number, profilePic, birthdate,  medical_specialities (id, name), medics_partners(partner_dni)').eq('dni', users[0].dni);\n\n        if (errorFetchUserInfo) {\n          setLoading(false);\n          return Swal.fire({\n            title: 'Error fetch user.',\n            text: errorFetchUserInfo.message,\n            icon: 'error'\n          });\n        }\n\n        const medicdata = {\n          dni: userInfo[0].dni,\n          name: userInfo[0].name,\n          lastname: userInfo[0].lastname,\n          medic_license: userInfo[0].medic_license,\n          medical_specialities: userInfo[0].medical_specialities.map(el => el),\n          my_patients: userInfo[0].medics_partners.map(el => el),\n          email: userInfo[0].email,\n          phone_number: userInfo[0].phone_number,\n          profilePic: userInfo[0].profilePic,\n          birthdate: userInfo[0].birthdate\n        };\n        localStorage.setItem('medicdata', JSON.stringify(medicdata));\n      }\n\n      await firebase.auth().signInWithEmailAndPassword(users[0].email, input.pass);\n      const userUid = await firebase.auth().currentUser.uid;\n      let downloadUrl = null;\n\n      if (userUid) {\n        try {\n          await firebase.storage().ref(`users`).child(`${userUid}`).listAll().then(el => {\n            setPicName(el.items[0].name);\n          });\n          downloadUrl = await firebase.storage().ref(`users/${userUid}/${picName}`).getDownloadURL();\n        } catch (error) {\n          console.log(error.message);\n        }\n      }\n\n      const dataUser = {\n        dni: users[0].dni,\n        email: users[0].email,\n        role: users[0].role,\n        avatar_url: downloadUrl || null\n      };\n      localStorage.setItem('userdata', JSON.stringify(dataUser));\n      setLoading(false);\n    } catch (error) {\n      setErrors('Usuario y/o contraseña incorrecto.');\n      setLoading(false);\n    }\n  };\n\n  const handleUserLogued = () => {\n    if (userData.role === 'admin') return window.location = `/${userData.dni}/admin`;\n    if (userData.role === 'medic') return window.location = `/${userData.dni}/medic`;\n    if (userData.role === 'affiliate') return window.location = `/${userData.dni}/affiliate`;\n  };\n\n  const handleAlert = async () => {\n    const {\n      value: email\n    } = await Swal.fire({\n      title: 'Integra: Password Reset.',\n      input: 'email',\n      inputLabel: 'Ingresa tu direccion de email',\n      inputPlaceholder: 'Ingresa tu direccion de email',\n      showCancelButton: true\n    }); //buscar en la base el mail\n\n    firebase.auth().sendPasswordResetEmail(email).then(function () {\n      // Email sent.\n      Swal.fire({\n        title: `Success!`,\n        text: `Enviamos un link a ${email} para restablecer tu contraseña.`,\n        icon: 'success',\n        confirmButtonText: 'OK'\n      });\n    }).catch(function () {\n      // An error happened.\n      Swal.fire({\n        title: `Error!`,\n        text: `No existe usuario con este email: ${email}.`,\n        icon: 'error',\n        confirmButtonText: 'OK'\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        className: styles.goBack,\n        href: \"/\",\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"Back button.\",\n          component: \"span\",\n          children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\xA1Bienvenido a Mi Integra Salud!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Aqui podras administrar tu informacion, gestionar tramites, recetas, estudios. Todo en un mismo lugar y mucho mas facil.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/#contact\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.buttonRegister,\n          children: \"Asociate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.formLogin,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: styles.labelRole,\n          htmlFor: \"role\",\n          children: \"Ingresar como:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          value: role,\n          id: \"role\",\n          className: styles.selectRole,\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: 10,\n            className: styles.itemRole,\n            children: [/*#__PURE__*/_jsxDEV(PersonIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this), \"Socio\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: 20,\n            className: styles.itemRole,\n            children: [/*#__PURE__*/_jsxDEV(HealingIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this), \"Medico\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: 30,\n            className: styles.itemRole,\n            children: [/*#__PURE__*/_jsxDEV(SecurityIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 29\n            }, this), \"Admin\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"../../assets/images/logo.png\",\n        alt: \"Logo Integra.\",\n        className: styles.logo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }, this), userFire.data && userData ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.loguedStyles,\n        children: [!userData.avatar_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://picsum.photos/200\",\n          alt: \"Avatar icon.\",\n          className: styles.userPic\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: userData.avatar_url,\n          alt: \"Avatar icon.\",\n          className: styles.logo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.userEmail,\n          children: userFire.data.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.buttonLogin,\n          onClick: handleUserLogued,\n          children: \"Ingresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.buttonLogout,\n          onClick: handleLogout,\n          children: \"Cerrar sesion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.loginUser,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"https://picsum.photos/200\",\n          alt: \"Avatar icon.\",\n          className: styles.userPic\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 25\n        }, this), role === 20 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.matricula,\n          children: \"Bienvenido Doctor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 29\n        }, this) : role === 10 ? /*#__PURE__*/_jsxDEV(Select, {\n          value: doc,\n          className: styles.selectDoc,\n          onChange: handleChange,\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: 40,\n            children: \"DNI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: 50,\n            children: \"Pasaporte\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.matricula,\n          children: \"Bienvenido Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          className: styles.inputData,\n          id: \"doc\",\n          label: \"N\\xBA de documento\",\n          value: input.doc,\n          onChange: handleInput,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          className: styles.inputData,\n          id: \"pass\",\n          label: \"Contrase\\xF1a\",\n          type: \"password\",\n          value: input.pass,\n          onChange: handleInput,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 25\n        }, this), errors ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.warningLogin,\n          children: \"Usuario y/o contrase\\xF1a incorrecta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 29\n        }, this) : null, loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          className: styles.progressLoad\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.column,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: styles.buttonLogin,\n            type: \"submit\",\n            value: \"Ingresar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.a,\n            onClick: handleAlert,\n            children: \"\\xBFOlvidaste tu contrase\\xF1a?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"4RGQmtoqch67LSwOdSI+CmCP6fE=\", false, function () {\n  return [useUser];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/alan/Escritorio/Integra/IntegraApp/src/components/Login-Ref/Login/Login.jsx"],"names":["React","useState","Select","TextField","MenuItem","CircularProgress","IconButton","ArrowBackIcon","PersonIcon","HealingIcon","SecurityIcon","useUser","supabase","styles","Swal","Login","firebase","role","setRole","doc","setDoc","input","setInput","pass","errors","setErrors","loading","setLoading","picName","setPicName","userFire","userData","JSON","parse","localStorage","getItem","handleChange","event","value","target","handleInput","id","regex","test","length","handleLogout","auth","signOut","clear","handleSubmit","preventDefault","data","users","from","select","eq","account","fire","title","text","icon","confirmButtonText","numRole","userInfo","error","errorFetchUserInfo","dni","message","affiliateData","name","lastname","plan_id","plans","plan_name","family_group","setItem","stringify","adminData","root","medicdata","medic_license","medical_specialities","map","el","my_patients","medics_partners","email","phone_number","profilePic","birthdate","signInWithEmailAndPassword","userUid","currentUser","uid","downloadUrl","storage","ref","child","listAll","then","items","getDownloadURL","console","log","dataUser","avatar_url","handleUserLogued","window","location","handleAlert","inputLabel","inputPlaceholder","showCancelButton","sendPasswordResetEmail","catch","container","header","goBack","buttonRegister","formLogin","labelRole","selectRole","itemRole","logo","loguedStyles","userPic","userEmail","buttonLogin","buttonLogout","loginUser","matricula","selectDoc","inputData","warningLogin","progressLoad","column","a"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport {\n    Select,\n    TextField,\n    MenuItem,\n    CircularProgress,\n    IconButton,\n} from '@material-ui/core';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport PersonIcon from '@material-ui/icons/Person';\nimport HealingIcon from '@material-ui/icons/Healing';\nimport SecurityIcon from '@material-ui/icons/Security';\nimport 'firebase/auth';\nimport { useUser } from 'reactfire';\nimport supabase from '../../../supabase.config.js';\nimport styles from './Login.module.css';\nimport Swal from 'sweetalert2';\n\nfunction Login({ firebase }) {\n    const [role, setRole] = useState(10);\n    const [doc, setDoc] = useState(40);\n    const [input, setInput] = useState({ doc: '', pass: '' });\n    const [errors, setErrors] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [picName, setPicName] = useState('');\n    const userFire = useUser();\n\n    const userData = JSON.parse(localStorage.getItem('userdata'));\n\n    const handleChange = (event) => {\n        const value = event.target.value;\n        value <= 30 ? setRole(value) : setDoc(value);\n    };\n\n    const handleInput = (event) => {\n        const value = event.target.value;\n        const id = event.target.id;\n        const regex = /^[0-9\\b]+$/; // this regex is to accept only numbers\n        if (id === 'doc') {\n            if ((value === '' || regex.test(value)) && value.length <= 8)\n                setInput({\n                    ...input,\n                    doc: value,\n                });\n        } else {\n            setInput({\n                ...input,\n                pass: value,\n            });\n        }\n    };\n\n    const handleLogout = async () => {\n        await firebase.auth().signOut();\n        localStorage.clear();\n    };\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setInput({ doc: '', pass: '' });\n        setLoading(true);\n        try {\n            let { data: users } = await supabase\n                .from('users')\n                .select('dni, email, role, avatar_url, account')\n                .eq('dni', input.doc);\n            if (users[0].account === 'inactive') {\n                setLoading(false);\n                return Swal.fire({\n                    title: `Error!`,\n                    text: `Acceso denegado! Tu cuenta se encuentra inactiva. Contacte al administrador`,\n                    icon: 'error',\n                    confirmButtonText: 'Entendido!',\n                });\n            }\n            const numRole =\n                users[0].role === 'affiliate'\n                    ? 10\n                    : users[0].role === 'medic'\n                    ? 20\n                    : 30;\n            if (numRole !== role) {\n                setLoading(false);\n                return setErrors('Usuario y/o contraseña incorrecto.');\n            } else {\n                setErrors(null);\n            }\n\n            if (users[0].role === 'affiliate') {\n                let { data: userInfo, error: errorFetchUserInfo } =\n                    await supabase\n                        .from(`partners`)\n                        .select(\n                            'name, lastname, family_group, plans (id, name)'\n                        )\n                        .eq('dni', users[0].dni);\n\n                if (errorFetchUserInfo) {\n                    setLoading(false);\n                    return Swal.fire({\n                        title: 'Error fetch user.',\n                        text: errorFetchUserInfo.message,\n                        icon: 'error',\n                    });\n                }\n\n                const affiliateData = {\n                    name: userInfo[0].name,\n                    lastname: userInfo[0].lastname,\n                    plan_id: userInfo[0].plans.id,\n                    plan_name: userInfo[0].plans.name,\n                    family_group: userInfo[0].family_group,\n                };\n                localStorage.setItem(\n                    'affiliatedata',\n                    JSON.stringify(affiliateData)\n                );\n            }\n\n            if (users[0].role === 'admin') {\n                let { data: userInfo, error: errorFetchUserInfo } =\n                    await supabase\n                        .from(`admins`)\n                        .select('name, lastname, root')\n                        .eq('dni', users[0].dni);\n\n                if (errorFetchUserInfo) {\n                    setLoading(false);\n                    return Swal.fire({\n                        title: 'Error fetch user.',\n                        text: errorFetchUserInfo.message,\n                        icon: 'error',\n                    });\n                }\n\n                const adminData = {\n                    name: userInfo[0].name,\n                    lastname: userInfo[0].lastname,\n                    root: userInfo[0].root,\n                };\n                localStorage.setItem('admindata', JSON.stringify(adminData));\n            }\n\n            if (users[0].role === 'medic') {\n                let { data: userInfo, error: errorFetchUserInfo } =\n                    await supabase\n                        .from(`medics`)\n                        .select(\n                            'dni, name, lastname, medic_license, email, phone_number, profilePic, birthdate,  medical_specialities (id, name), medics_partners(partner_dni)'\n                        )\n                        .eq('dni', users[0].dni);\n\n                if (errorFetchUserInfo) {\n                    setLoading(false);\n                    return Swal.fire({\n                        title: 'Error fetch user.',\n                        text: errorFetchUserInfo.message,\n                        icon: 'error',\n                    });\n                }\n                const medicdata = {\n                    dni: userInfo[0].dni,\n                    name: userInfo[0].name,\n                    lastname: userInfo[0].lastname,\n                    medic_license: userInfo[0].medic_license,\n                    medical_specialities: userInfo[0].medical_specialities.map(\n                        (el) => el\n                    ),\n                    my_patients: userInfo[0].medics_partners.map((el) => el),\n                    email: userInfo[0].email,\n                    phone_number: userInfo[0].phone_number,\n                    profilePic: userInfo[0].profilePic,\n                    birthdate: userInfo[0].birthdate,\n                };\n                localStorage.setItem('medicdata', JSON.stringify(medicdata));\n            }\n\n            await firebase\n                .auth()\n                .signInWithEmailAndPassword(users[0].email, input.pass);\n\n            const userUid = await firebase.auth().currentUser.uid;\n            let downloadUrl = null;\n            if (userUid) {\n                try {\n                    await firebase\n                        .storage()\n                        .ref(`users`)\n                        .child(`${userUid}`)\n                        .listAll()\n                        .then((el) => {\n                            setPicName(el.items[0].name);\n                        });\n                    downloadUrl = await firebase\n                        .storage()\n                        .ref(`users/${userUid}/${picName}`)\n                        .getDownloadURL();\n                } catch (error) {\n                    console.log(error.message);\n                }\n            }\n\n            const dataUser = {\n                dni: users[0].dni,\n                email: users[0].email,\n                role: users[0].role,\n                avatar_url: downloadUrl || null,\n            };\n\n            localStorage.setItem('userdata', JSON.stringify(dataUser));\n            setLoading(false);\n        } catch (error) {\n            setErrors('Usuario y/o contraseña incorrecto.');\n            setLoading(false);\n        }\n    };\n\n    const handleUserLogued = () => {\n        if (userData.role === 'admin')\n            return (window.location = `/${userData.dni}/admin`);\n        if (userData.role === 'medic')\n            return (window.location = `/${userData.dni}/medic`);\n        if (userData.role === 'affiliate')\n            return (window.location = `/${userData.dni}/affiliate`);\n    };\n\n    const handleAlert = async () => {\n        const { value: email } = await Swal.fire({\n            title: 'Integra: Password Reset.',\n            input: 'email',\n            inputLabel: 'Ingresa tu direccion de email',\n            inputPlaceholder: 'Ingresa tu direccion de email',\n            showCancelButton: true,\n        });\n        //buscar en la base el mail\n        firebase\n            .auth()\n            .sendPasswordResetEmail(email)\n            .then(function () {\n                // Email sent.\n                Swal.fire({\n                    title: `Success!`,\n                    text: `Enviamos un link a ${email} para restablecer tu contraseña.`,\n                    icon: 'success',\n                    confirmButtonText: 'OK',\n                });\n            })\n            .catch(function () {\n                // An error happened.\n                Swal.fire({\n                    title: `Error!`,\n                    text: `No existe usuario con este email: ${email}.`,\n                    icon: 'error',\n                    confirmButtonText: 'OK',\n                });\n            });\n    };\n    return (\n        <div className={styles.container}>\n            <aside className={styles.header}>\n                <a className={styles.goBack} href='/'>\n                    <IconButton aria-label='Back button.' component='span'>\n                        <ArrowBackIcon />\n                    </IconButton>\n                </a>\n                <h2>¡Bienvenido a Mi Integra Salud!</h2>\n                <p>\n                    Aqui podras administrar tu informacion, gestionar tramites,\n                    recetas, estudios. Todo en un mismo lugar y mucho mas facil.\n                </p>\n                <a href='/#contact'>\n                    <button className={styles.buttonRegister}>Asociate</button>\n                </a>\n            </aside>\n            <form className={styles.formLogin} onSubmit={handleSubmit}>\n                <section>\n                    <label className={styles.labelRole} htmlFor='role'>\n                        Ingresar como:\n                    </label>\n                    <Select\n                        value={role}\n                        id='role'\n                        className={styles.selectRole}\n                        onChange={handleChange}\n                    >\n                        <MenuItem value={10} className={styles.itemRole}>\n                            <PersonIcon />\n                            Socio\n                        </MenuItem>\n                        <MenuItem value={20} className={styles.itemRole}>\n                            <HealingIcon />\n                            Medico\n                        </MenuItem>\n                        <MenuItem value={30} className={styles.itemRole}>\n                            <SecurityIcon />\n                            Admin\n                        </MenuItem>\n                    </Select>\n                </section>\n                <img\n                    src='../../assets/images/logo.png'\n                    alt='Logo Integra.'\n                    className={styles.logo}\n                />\n                {userFire.data && userData ? (\n                    <div className={styles.loguedStyles}>\n                        {!userData.avatar_url ? (\n                            <img\n                                src='https://picsum.photos/200'\n                                alt='Avatar icon.'\n                                className={styles.userPic}\n                            />\n                        ) : (\n                            <img\n                                src={userData.avatar_url}\n                                alt='Avatar icon.'\n                                className={styles.logo}\n                            />\n                        )}\n                        <p className={styles.userEmail}>\n                            {userFire.data.email}\n                        </p>\n                        <button\n                            className={styles.buttonLogin}\n                            onClick={handleUserLogued}\n                        >\n                            Ingresar\n                        </button>\n                        <button\n                            className={styles.buttonLogout}\n                            onClick={handleLogout}\n                        >\n                            Cerrar sesion\n                        </button>\n                    </div>\n                ) : (\n                    <section className={styles.loginUser}>\n                        <img\n                            src='https://picsum.photos/200'\n                            alt='Avatar icon.'\n                            className={styles.userPic}\n                        />\n                        {role === 20 ? (\n                            <p className={styles.matricula}>\n                                Bienvenido Doctor\n                            </p>\n                        ) : role === 10 ? (\n                            <Select\n                                value={doc}\n                                className={styles.selectDoc}\n                                onChange={handleChange}\n                            >\n                                <MenuItem value={40}>DNI</MenuItem>\n                                <MenuItem value={50}>Pasaporte</MenuItem>\n                            </Select>\n                        ) : (\n                            <p className={styles.matricula}>Bienvenido Admin</p>\n                        )}\n                        <TextField\n                            className={styles.inputData}\n                            id='doc'\n                            label='Nº de documento'\n                            value={input.doc}\n                            onChange={handleInput}\n                            required\n                        />\n\n                        <TextField\n                            className={styles.inputData}\n                            id='pass'\n                            label='Contraseña'\n                            type='password'\n                            value={input.pass}\n                            onChange={handleInput}\n                            required\n                        />\n\n                        {errors ? (\n                            <p className={styles.warningLogin}>\n                                Usuario y/o contraseña incorrecta\n                            </p>\n                        ) : null}\n\n                        {loading ? (\n                            <CircularProgress className={styles.progressLoad} />\n                        ) : (\n                            <div className={styles.column}>\n                                <input\n                                    className={styles.buttonLogin}\n                                    type='submit'\n                                    value='Ingresar'\n                                />\n                                <button\n                                    className={styles.a}\n                                    onClick={handleAlert}\n                                >\n                                    ¿Olvidaste tu contraseña?\n                                </button>\n                            </div>\n                        )}\n                    </section>\n                )}\n            </form>\n        </div>\n    );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}