{"ast":null,"code":"var _jsxFileName = \"/home/alan/Escritorio/Integra/IntegraApp/src/components/Affiliate/UserProfile/UserProfile.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport supabase from '../../../supabase.config';\nimport './UserProfile.css';\nimport Swal from 'sweetalert2';\nimport { Autocomplete } from '@material-ui/lab';\nimport { Button, TextField } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport { AccountCircleRounded } from '@material-ui/icons'; // Estilos usados en componentes de MUI.\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  root: {\n    //className={classes.root}\n    maxWidth: 345\n  },\n  media: {\n    height: 140\n  },\n  modButton: {\n    height: 40,\n    backgroundColor: '#41aea9',\n    color: '#000000',\n    fontWeight: 600,\n    alignSelf: 'flex-end',\n    marginRight: 30\n  },\n  modInput: {\n    marginBottom: 15,\n    width: '100%',\n    background: 'white'\n  },\n  selInput: {\n    marginBottom: 15,\n    width: '100%',\n    background: 'white'\n  },\n  autoInput: {\n    width: '100%',\n    marginBottom: 15,\n    background: 'white'\n  },\n  picUpload: {\n    color: '#fff',\n    width: '150px',\n    height: '150px'\n  }\n});\nexport default function UserProfile({\n  firebase\n}) {\n  _s();\n\n  // Estilos para MUI.\n  let classes = useStyles(); // Estado que guarda localmente los datos del perfil del usuario.\n\n  let [user, setUser] = useState(null); // Función que a partir del número de documento (que obtiene\n  // del localStorage), se trae la información del usuario\n  // de la base de datos.\n\n  let fetchUserData = async document => {\n    let {\n      data: userInfo,\n      error: errorFetchUser\n    } = await supabase.from('partners').select('dni, name, lastname, birthdate, phone_number, email,  plans (id, name),gender, address (locality_id,street, street_number, floor, department, localities (name, postal_code, states (id,name)))').eq('dni', document);\n    setUser({\n      dni: userInfo[0].dni,\n      plan: userInfo[0].plans.name,\n      name: userInfo[0].name,\n      lastname: userInfo[0].lastname,\n      birthdate: userInfo[0].birthdate,\n      email: userInfo[0].email,\n      phone: userInfo[0].phone_number,\n      street: userInfo[0].address[0].street,\n      street_number: userInfo[0].address[0].street_number,\n      floor: userInfo[0].address[0].floor,\n      department: userInfo[0].address[0].department,\n      locality_id: userInfo[0].address[0].locality_id,\n      locality: userInfo[0].address[0].localities.name,\n      state: userInfo[0].address[0].localities.states.name,\n      state_id: userInfo[0].address[0].localities.states.id,\n      postal_code: userInfo[0].address[0].localities.postal_code\n    });\n    if (errorFetchUser) return console.log(errorFetchUser);\n  }; // const [file, setFile] = useState('');\n  // Al cargar la página por primera vez, se trae del localStorage\n  // el dni del usuario y carga en user los datos que se trae\n  // de la base de datos.\n\n\n  const userDni = JSON.parse(localStorage.getItem('userdata'));\n  useEffect(() => {\n    fetchUserData(userDni.dni); //eslint-disable-next-line\n  }, []); // Función que calcula la edad en base a la F.Nac.\n\n  function getAge(date) {\n    var today = new Date();\n    var birthdate = new Date(date);\n    var age = today.getFullYear() - birthdate.getFullYear();\n    var m = today.getMonth() - birthdate.getMonth();\n\n    if (m < 0 || m === 0 && today.getDate() < birthdate.getDate()) {\n      age--;\n    }\n\n    return age;\n  } // Estado de modificación del perfil del usuario\n  // (si modifica o deja como está)\n\n\n  let [modify, setModify] = useState(false); // Función de cambio de estado de modificación\n  // al hacer click en modificar.\n\n  function handleclick(e) {\n    //submit\n    // Cuando hace click en modificar ...\n    if (!modify) {\n      setModify(true);\n    }\n  } // Provincias a mostrar en el selector.\n\n\n  let [allstates, setAllstates] = useState(null); // Función que obtiene las provincias de la base de datos,\n  // y las guarda como un arreglo en el estado allstates.\n\n  async function getStates() {\n    try {\n      let {\n        data: states\n      } = await supabase.from('states').select('id , name');\n      setAllstates(states.map(e => ({\n        state_id: e.id,\n        state_name: e.name\n      })));\n    } catch (err) {\n      console.error(err);\n    }\n\n    return;\n  } // Cuando hace click en modificar se trae las provincias.\n  // y las guarda en el estado allstates.\n\n\n  useEffect(() => {\n    if (modify) {\n      getStates();\n    }\n  }, [modify]); // Renderiza el selector de provincias cuando se carga allstates.\n\n  useEffect(() => {}, [allstates]); // Estado local donde guarda los datos modificables del perfil del usuario.\n\n  let [modInfo, setModInfo] = useState(null); // Cuando hago click en modificar, guarda por primera en el\n  //  estado modInfo todos los datos que ya tenía del usuario.\n\n  useEffect(() => {\n    //modInfo.street.length\n    if (modify && !!user.name.length) {\n      // setea los datos que puede modificar\n      setModInfo({\n        email: user.email,\n        phone: user.phone,\n        street: user.street,\n        street_number: user.street_number,\n        floor: user.floor,\n        department: user.department,\n        locality_id: user.locality_id,\n        locality: user.locality,\n        state: user.state,\n        state_id: user.state_id,\n        postal_code: user.postal_code\n      });\n    }\n  }, [user, modify]); // let [textInputs, setTextInputs] = useState({})\n  // Estado de errores por cada input modificable.\n\n  let [error, setError] = useState({\n    street: '',\n    street_number: '',\n    floor: '',\n    department: '',\n    email: '',\n    phone: '',\n    // state: '', <-- No tiene error x q viene del selector\n    locality: '',\n    postal_code: '' // locality_id:\n\n  }); // Cuando cambio un dato del usuario setea el error y modifica\n  // el estado (modInfo) en donde se guarda .\n\n  let handlechange = e => {\n    // ver que el input tenga los mismos nombres\n    let item = e.target.name;\n\n    switch (item) {\n      case 'street':\n        // Que no esté vacío ni espacios\n        // ^[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+(\\s*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]*)*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+$\n        let streetreg = /[0-9a-zA-ZÀ-ÿ\\u00f1\\u00d1]+[ ]?[0-9a-z A-ZÀ-ÿ\\u00f1\\u00d1]*$/;\n        setError(error => ({ ...error,\n          [e.target.name]: streetreg.test(e.target.value) ? '' : 'No puede quedar incompleto o en blanco.'\n        }));\n        setModInfo({ ...modInfo,\n          [e.target.name]: e.target.value\n        });\n        break;\n\n      case 'street_number':\n        // let snumregex = /^[0-9]{1,10}$/;\n        let snumregex = /^\\d{1,10}$/;\n        setError(error => ({ ...error,\n          [e.target.name]: snumregex.test(e.target.value) ? '' : 'Sólo admite números'\n        }));\n        setModInfo({ ...modInfo,\n          [e.target.name]: e.target.value\n        });\n        break;\n\n      case 'floor':\n        setModInfo({ ...modInfo,\n          [e.target.name]: e.target.value\n        });\n        break;\n\n      case 'department':\n        setModInfo({ ...modInfo,\n          [e.target.name]: e.target.value\n        });\n        break;\n\n      case 'email':\n        let emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\n        setError(error => ({ ...error,\n          [e.target.name]: emailRegex.test(e.target.value) ? '' : 'Debe ser un email válido'\n        }));\n        setModInfo({ ...modInfo,\n          [e.target.name]: e.target.value\n        });\n        break;\n\n      case 'phone':\n        setError(error => ({ ...error,\n          [e.target.name]: /^[0-9]{5,9}$/.test(e.target.value) ? '' : 'De 5 (fijo) a 9 (cel sin 15 ni cod. área) cifras.'\n        }));\n        setModInfo({ ...modInfo,\n          [e.target.name]: e.target.value\n        });\n        break;\n\n      case 'state':\n        // Si cambio la provincia tengo que sacar el código postal\n        // id de provincia y la localidad que estaba por defecto.\n        function findStateId(provincia, allstates) {\n          let idfound = allstates.filter(state => state.state_name === provincia)[0].state_id;\n          return idfound;\n        }\n\n        setModInfo({ ...modInfo,\n          state: e.target.value,\n          locality_id: '',\n          locality: '',\n          state_id: findStateId(e.target.value, allstates),\n          postal_code: ''\n        });\n        break;\n\n      case 'postal_code':\n        setError(error => ({ ...error,\n          [e.target.name]: /^[0-9]{4}$/.test(e.target.value) ? '' : 'Debe ser un número de 4 cifras'\n        }));\n        setModInfo({ ...modInfo,\n          [e.target.name]: e.target.value\n        });\n        break;\n\n      default:\n        break;\n    }\n  }; // Cuando cambio una localidad setea el error, modifica\n  // el estado (modInfo) en donde se guarda y el código postal.\n\n\n  let handlechange2 = (e, value) => {\n    // Que no sea string vacío\n    let cityregex = /[\\S]/;\n    setError(error => ({ ...error,\n      locality: cityregex.test(value) ? '' : 'No puede quedar incompleto.'\n    }));\n\n    async function setInfoLocality(city, modInfo) {\n      try {\n        let {\n          data: infolocality\n        } = await supabase.from('localities').select('id_locality,name,postal_code').eq('state_id', modInfo.state_id).eq('name', city);\n        setModInfo({ ...modInfo,\n          locality: infolocality[0].name,\n          locality_id: infolocality[0].id_locality,\n          postal_code: infolocality[0].postal_code\n        });\n      } catch (err) {\n        console.error(err);\n      }\n\n      return;\n    }\n\n    setInfoLocality(value, modInfo);\n  };\n\n  let validate = modInfo => {\n    return Object.values(error).every(x => x === ''); //si no tiene ningún mensaje de error devuelve true\n  }; // Cada vez que se modifica modInfo renderiza.\n  // Ciudades a cargar en el selector.\n\n\n  let [showCities, setShowCities] = useState(null); // Función que filtra las ciudades según la provincia ingresada\n\n  async function getCities(idprovincia, modInfo) {\n    //modInfo.state_id\n    try {\n      let {\n        data: infolocality\n      } = await supabase.from('localities').select('id_locality,name,postal_code').eq('state_id', idprovincia);\n      setShowCities(infolocality.map(e => e.name)); // setAllstates(states.map(e => e.name));\n    } catch (err) {\n      console.error(err);\n    }\n\n    return;\n  } // Cuando actualiza la provincia cambia las ciudades a mostrar\n\n\n  useEffect(() => {\n    if (modInfo) {\n      getCities(modInfo.state_id);\n    }\n  }, [modInfo]); //----------------------------------------------------\n\n  async function handlesubmit() {\n    // Guardar datos en supabase !!!!!\n    if (validate()) {\n      //Update address table (si modifico dirección o localidad)\n      let modifyAddressT = async (user, modInfo) => {\n        let {\n          error\n        } = await supabase.from('address').update({\n          street: modInfo.street,\n          street_number: modInfo.street_number,\n          floor: modInfo.floor,\n          department: modInfo.department,\n          locality_id: modInfo.locality_id\n        }).eq('partner_dni', user.dni);\n        if (error) console.log(error);\n      };\n\n      modifyAddressT(user, modInfo);\n      setModify(false);\n      setModInfo(null);\n      setUser(null);\n      let userDni = JSON.parse(localStorage.getItem('userdata')).dni;\n      fetchUserData(userDni);\n      await Swal.fire({\n        title: 'Exito!',\n        text: 'Sus datos fueron guardados',\n        icon: 'success',\n        confirmButtonText: 'OK'\n      });\n      window.location.reload();\n    }\n  } //----------------------------------------------------\n\n\n  const handleFile = e => {\n    const file = e.target.files[0];\n    picUpload(file);\n  };\n\n  const picUpload = async file => {\n    const extension = file.name.slice(file.name.lastIndexOf('.'));\n    const userUid = firebase.auth().currentUser.uid;\n\n    try {\n      await firebase.storage().ref(`users/${userUid}/profile${extension}`).put(file);\n      let imgSrc = await firebase.storage().ref(`users/${userUid}/profile${extension}`).getDownloadURL();\n      let newLS = { ...userDni,\n        avatar_url: imgSrc\n      };\n      localStorage.setItem('userdata', JSON.stringify(newLS));\n      window.location.reload();\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ProfilePage_Cont\",\n    children: user && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info_cont\",\n      children: [!modify ?\n      /*#__PURE__*/\n      // Si no modifica usa los datos de user.\n      _jsxDEV(\"div\", {\n        className: \"input_info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"title\",\n          children: \"Mi Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"on_line_cont\",\n          children: userDni.avatar_url ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont imgContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: `${userDni.avatar_url}`,\n              alt: \"Profile pic.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"changeImg\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                accept: \"image/*\",\n                className: \"picUpload\",\n                id: \"icon-button-file\",\n                type: \"file\",\n                onChange: handleFile\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"icon-button-file\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  className: classes.picUpload,\n                  \"aria-label\": \"upload picture\",\n                  component: \"span\",\n                  children: \"Cambiar Imagen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont imgContainer\",\n            children: [/*#__PURE__*/_jsxDEV(AccountCircleRounded, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"changeImg\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                accept: \"image/*\",\n                className: \"picUpload\",\n                id: \"icon-button-file\",\n                type: \"file\",\n                onChange: handleFile\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"icon-button-file\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  className: classes.picUpload,\n                  \"aria-label\": \"upload picture\",\n                  component: \"span\",\n                  children: \"Cambiar Imagen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"on_line_cont\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Nombre:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Apellido:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.lastname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Edad:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: getAge(user.birthdate)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"on_line_cont\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"F. Nacimiento:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.birthdate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"on_line_cont\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 513,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Tel\\xE9fono:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"on_line_cont\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Calle:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: [' ', user.street]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"N\\xFAmero:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: [' ', user.street_number]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Piso:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: [' ', user.floor]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 537,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 535,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Dto:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: [' ', user.department]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"on_line_cont\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Ciudad:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.locality\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"C\\xF3digo Postal:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 558,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.postal_code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"on_line_cont\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"one_info_cont\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_title\",\n              children: \"Provincia:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 568,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"profile_info\",\n              children: user.state\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 25\n      }, this) :\n      /*#__PURE__*/\n      // Si modifica usa los datos de modInfo.\n      _jsxDEV(_Fragment, {\n        children: modInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modif_info\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"mod_form_cont\",\n            noValidate: true,\n            autoComplete: \"off\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form_left_col\",\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                name: \"street\",\n                id: \"streetInput\",\n                className: classes.modInput,\n                label: \"Calle\",\n                variant: \"outlined\",\n                defaultValue: modInfo.street,\n                onChange: handlechange,\n                error: error.street,\n                helperText: error.street\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                name: \"street_number\",\n                id: \"street_numberInput\",\n                className: classes.modInput,\n                label: \"N\\xFAmero\",\n                variant: \"outlined\",\n                defaultValue: modInfo.street_number,\n                onChange: handlechange,\n                error: error.street_number,\n                helperText: error.street_number\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                name: \"floor\",\n                id: \"floorInput\",\n                className: classes.modInput,\n                label: \"Piso\",\n                variant: \"outlined\",\n                defaultValue: modInfo.floor,\n                onChange: handlechange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                name: \"department\",\n                id: \"departmentInput\",\n                className: classes.modInput,\n                label: \"Departamento\",\n                variant: \"outlined\",\n                defaultValue: modInfo.department,\n                onChange: handlechange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 617,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                name: \"email\",\n                id: \"emailInput\",\n                className: classes.modInput,\n                label: \"email\",\n                variant: \"outlined\",\n                defaultValue: modInfo.email,\n                onChange: handlechange,\n                error: error.email,\n                helperText: error.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form_right_col\",\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                name: \"phone\",\n                id: \"phoneInput\",\n                className: classes.modInput,\n                defaultValue: modInfo.phone,\n                label: \"Tel\\xE9fono\",\n                variant: \"outlined\",\n                onChange: handlechange,\n                error: error.phone,\n                helperText: error.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                id: \"stateInput\",\n                select: true,\n                label: \"Provincia\",\n                value: modInfo.state,\n                onChange: handlechange // helperText=\"Seleccione una provincia\"\n                ,\n                variant: \"outlined\",\n                name: \"state\",\n                className: classes.selInput,\n                children: allstates && allstates.map((state, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  className: \"inputSel\",\n                  value: state.state_name,\n                  children: state.state_name\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 668,\n                  columnNumber: 61\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 45\n              }, this), showCities && /*#__PURE__*/_jsxDEV(Autocomplete, {\n                id: \"cityInput\",\n                name: \"locality\" //  Acá va el arreglo a mostrar en el selector\n                ,\n                options: showCities,\n                autoHighlight: true,\n                label: \"Localidad\",\n                value: modInfo.locality,\n                variant: \"outlined\",\n                onChange: handlechange2,\n                className: classes.autoInput,\n                getOptionLabel: option => option,\n                error: error.locality,\n                helperText: error.locality,\n                renderOption: option => option,\n                renderInput: params => /*#__PURE__*/_jsxDEV(TextField, {\n                  id: \"cityInputopt\",\n                  name: \"cityOpt\",\n                  ...params,\n                  label: \"Localidad\",\n                  variant: \"outlined\",\n                  inputProps: { ...params.inputProps,\n                    autoComplete: 'new-password' // disable autocomplete and autofill\n\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 685,\n                columnNumber: 49\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                name: \"postal_code\",\n                className: classes.modInput,\n                label: \"C\\xF3digo Postal\",\n                variant: \"outlined\",\n                defaultValue: modInfo.postal_code,\n                value: modInfo.postal_code,\n                onChange: handlechange,\n                error: error.postal_code,\n                helperText: error.postal_code\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                id: \"savebtn\",\n                disabled: !validate(),\n                variant: \"contained\",\n                className: classes.modButton,\n                onClick: handlesubmit,\n                children: \"Guardar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 736,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 33\n        }, this)\n      }, void 0, false), !modify && /*#__PURE__*/_jsxDEV(Button, {\n        id: \"modbtn\",\n        variant: \"contained\",\n        className: classes.modButton,\n        onClick: handleclick,\n        children: \"Modificar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 421,\n    columnNumber: 9\n  }, this);\n}\n\n_s(UserProfile, \"e0zpOpZgnGcziVFPpjJw6o/RYgA=\", false, function () {\n  return [useStyles];\n});\n\n_c = UserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"sources":["/home/alan/Escritorio/Integra/IntegraApp/src/components/Affiliate/UserProfile/UserProfile.jsx"],"names":["React","useState","useEffect","makeStyles","supabase","Swal","Autocomplete","Button","TextField","IconButton","AccountCircleRounded","useStyles","root","maxWidth","media","height","modButton","backgroundColor","color","fontWeight","alignSelf","marginRight","modInput","marginBottom","width","background","selInput","autoInput","picUpload","UserProfile","firebase","classes","user","setUser","fetchUserData","document","data","userInfo","error","errorFetchUser","from","select","eq","dni","plan","plans","name","lastname","birthdate","email","phone","phone_number","street","address","street_number","floor","department","locality_id","locality","localities","state","states","state_id","id","postal_code","console","log","userDni","JSON","parse","localStorage","getItem","getAge","date","today","Date","age","getFullYear","m","getMonth","getDate","modify","setModify","handleclick","e","allstates","setAllstates","getStates","map","state_name","err","modInfo","setModInfo","length","setError","handlechange","item","target","streetreg","test","value","snumregex","emailRegex","findStateId","provincia","idfound","filter","handlechange2","cityregex","setInfoLocality","city","infolocality","id_locality","validate","Object","values","every","x","showCities","setShowCities","getCities","idprovincia","handlesubmit","modifyAddressT","update","fire","title","text","icon","confirmButtonText","window","location","reload","handleFile","file","files","extension","slice","lastIndexOf","userUid","auth","currentUser","uid","storage","ref","put","imgSrc","getDownloadURL","newLS","avatar_url","setItem","stringify","message","index","option","params","inputProps","autoComplete"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport supabase from '../../../supabase.config';\nimport './UserProfile.css';\nimport Swal from 'sweetalert2';\nimport { Autocomplete } from '@material-ui/lab';\nimport { Button, TextField } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport { AccountCircleRounded } from '@material-ui/icons';\n\n// Estilos usados en componentes de MUI.\nconst useStyles = makeStyles({\n    root: {\n        //className={classes.root}\n        maxWidth: 345,\n    },\n    media: {\n        height: 140,\n    },\n    modButton: {\n        height: 40,\n        backgroundColor: '#41aea9',\n        color: '#000000',\n        fontWeight: 600,\n        alignSelf: 'flex-end',\n        marginRight: 30,\n    },\n    modInput: {\n        marginBottom: 15,\n        width: '100%',\n        background: 'white',\n    },\n    selInput: {\n        marginBottom: 15,\n        width: '100%',\n        background: 'white',\n    },\n    autoInput: {\n        width: '100%',\n        marginBottom: 15,\n        background: 'white',\n    },\n    picUpload: {\n        color: '#fff',\n        width: '150px',\n        height: '150px',\n    },\n});\n\nexport default function UserProfile({ firebase }) {\n    // Estilos para MUI.\n    let classes = useStyles();\n\n    // Estado que guarda localmente los datos del perfil del usuario.\n    let [user, setUser] = useState(null);\n\n    // Función que a partir del número de documento (que obtiene\n    // del localStorage), se trae la información del usuario\n    // de la base de datos.\n    let fetchUserData = async (document) => {\n        let { data: userInfo, error: errorFetchUser } = await supabase\n            .from('partners')\n            .select(\n                'dni, name, lastname, birthdate, phone_number, email,  plans (id, name),gender, address (locality_id,street, street_number, floor, department, localities (name, postal_code, states (id,name)))'\n            )\n            .eq('dni', document);\n\n        setUser({\n            dni: userInfo[0].dni,\n            plan: userInfo[0].plans.name,\n            name: userInfo[0].name,\n            lastname: userInfo[0].lastname,\n            birthdate: userInfo[0].birthdate,\n            email: userInfo[0].email,\n            phone: userInfo[0].phone_number,\n            street: userInfo[0].address[0].street,\n            street_number: userInfo[0].address[0].street_number,\n            floor: userInfo[0].address[0].floor,\n            department: userInfo[0].address[0].department,\n            locality_id: userInfo[0].address[0].locality_id,\n            locality: userInfo[0].address[0].localities.name,\n            state: userInfo[0].address[0].localities.states.name,\n            state_id: userInfo[0].address[0].localities.states.id,\n            postal_code: userInfo[0].address[0].localities.postal_code,\n        });\n        if (errorFetchUser) return console.log(errorFetchUser);\n    };\n\n    // const [file, setFile] = useState('');\n\n    // Al cargar la página por primera vez, se trae del localStorage\n    // el dni del usuario y carga en user los datos que se trae\n    // de la base de datos.\n    const userDni = JSON.parse(localStorage.getItem('userdata'));\n    useEffect(() => {\n        fetchUserData(userDni.dni);\n        //eslint-disable-next-line\n    }, []);\n\n    // Función que calcula la edad en base a la F.Nac.\n    function getAge(date) {\n        var today = new Date();\n        var birthdate = new Date(date);\n        var age = today.getFullYear() - birthdate.getFullYear();\n        var m = today.getMonth() - birthdate.getMonth();\n\n        if (m < 0 || (m === 0 && today.getDate() < birthdate.getDate())) {\n            age--;\n        }\n\n        return age;\n    }\n\n    // Estado de modificación del perfil del usuario\n    // (si modifica o deja como está)\n    let [modify, setModify] = useState(false);\n\n    // Función de cambio de estado de modificación\n    // al hacer click en modificar.\n    function handleclick(e) {\n        //submit\n        // Cuando hace click en modificar ...\n        if (!modify) {\n            setModify(true);\n        }\n    }\n\n    // Provincias a mostrar en el selector.\n    let [allstates, setAllstates] = useState(null);\n\n    // Función que obtiene las provincias de la base de datos,\n    // y las guarda como un arreglo en el estado allstates.\n    async function getStates() {\n        try {\n            let { data: states } = await supabase\n                .from('states')\n                .select('id , name');\n\n            setAllstates(\n                states.map((e) => ({ state_id: e.id, state_name: e.name }))\n            );\n        } catch (err) {\n            console.error(err);\n        }\n        return;\n    }\n\n    // Cuando hace click en modificar se trae las provincias.\n    // y las guarda en el estado allstates.\n    useEffect(() => {\n        if (modify) {\n            getStates();\n        }\n    }, [modify]);\n\n    // Renderiza el selector de provincias cuando se carga allstates.\n    useEffect(() => {}, [allstates]);\n\n    // Estado local donde guarda los datos modificables del perfil del usuario.\n    let [modInfo, setModInfo] = useState(null);\n\n    // Cuando hago click en modificar, guarda por primera en el\n    //  estado modInfo todos los datos que ya tenía del usuario.\n    useEffect(() => {\n        //modInfo.street.length\n        if (modify && !!user.name.length) {\n            // setea los datos que puede modificar\n            setModInfo({\n                email: user.email,\n                phone: user.phone,\n                street: user.street,\n                street_number: user.street_number,\n                floor: user.floor,\n                department: user.department,\n                locality_id: user.locality_id,\n                locality: user.locality,\n                state: user.state,\n                state_id: user.state_id,\n                postal_code: user.postal_code,\n            });\n        }\n    }, [user, modify]);\n\n    // let [textInputs, setTextInputs] = useState({})\n    // Estado de errores por cada input modificable.\n    let [error, setError] = useState({\n        street: '',\n        street_number: '',\n        floor: '',\n        department: '',\n        email: '',\n        phone: '',\n        // state: '', <-- No tiene error x q viene del selector\n        locality: '',\n        postal_code: '',\n        // locality_id:\n    });\n\n    // Cuando cambio un dato del usuario setea el error y modifica\n    // el estado (modInfo) en donde se guarda .\n    let handlechange = (e) => {\n        // ver que el input tenga los mismos nombres\n        let item = e.target.name;\n        switch (item) {\n            case 'street': // Que no esté vacío ni espacios\n                // ^[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+(\\s*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]*)*[a-zA-ZÀ-ÿ\\u00f1\\u00d1]+$\n                let streetreg =\n                    /[0-9a-zA-ZÀ-ÿ\\u00f1\\u00d1]+[ ]?[0-9a-z A-ZÀ-ÿ\\u00f1\\u00d1]*$/;\n\n                setError((error) => ({\n                    ...error,\n                    [e.target.name]: streetreg.test(e.target.value)\n                        ? ''\n                        : 'No puede quedar incompleto o en blanco.',\n                }));\n                setModInfo({ ...modInfo, [e.target.name]: e.target.value });\n                break;\n            case 'street_number':\n                // let snumregex = /^[0-9]{1,10}$/;\n                let snumregex = /^\\d{1,10}$/;\n                setError((error) => ({\n                    ...error,\n                    [e.target.name]: snumregex.test(e.target.value)\n                        ? ''\n                        : 'Sólo admite números',\n                }));\n                setModInfo({ ...modInfo, [e.target.name]: e.target.value });\n                break;\n            case 'floor':\n                setModInfo({ ...modInfo, [e.target.name]: e.target.value });\n                break;\n            case 'department':\n                setModInfo({ ...modInfo, [e.target.name]: e.target.value });\n                break;\n            case 'email':\n                let emailRegex =\n                    /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i;\n\n                setError((error) => ({\n                    ...error,\n                    [e.target.name]: emailRegex.test(e.target.value)\n                        ? ''\n                        : 'Debe ser un email válido',\n                }));\n                setModInfo({ ...modInfo, [e.target.name]: e.target.value });\n                break;\n            case 'phone':\n                setError((error) => ({\n                    ...error,\n                    [e.target.name]: /^[0-9]{5,9}$/.test(e.target.value)\n                        ? ''\n                        : 'De 5 (fijo) a 9 (cel sin 15 ni cod. área) cifras.',\n                }));\n                setModInfo({ ...modInfo, [e.target.name]: e.target.value });\n                break;\n            case 'state':\n                // Si cambio la provincia tengo que sacar el código postal\n                // id de provincia y la localidad que estaba por defecto.\n                function findStateId(provincia, allstates) {\n                    let idfound = allstates.filter(\n                        (state) => state.state_name === provincia\n                    )[0].state_id;\n                    return idfound;\n                }\n                setModInfo({\n                    ...modInfo,\n                    state: e.target.value,\n                    locality_id: '',\n                    locality: '',\n                    state_id: findStateId(e.target.value, allstates),\n                    postal_code: '',\n                });\n                break;\n            case 'postal_code':\n                setError((error) => ({\n                    ...error,\n                    [e.target.name]: /^[0-9]{4}$/.test(e.target.value)\n                        ? ''\n                        : 'Debe ser un número de 4 cifras',\n                }));\n                setModInfo({ ...modInfo, [e.target.name]: e.target.value });\n                break;\n            default:\n                break;\n        }\n    };\n\n    // Cuando cambio una localidad setea el error, modifica\n    // el estado (modInfo) en donde se guarda y el código postal.\n    let handlechange2 = (e, value) => {\n        // Que no sea string vacío\n        let cityregex = /[\\S]/;\n\n        setError((error) => ({\n            ...error,\n            locality: cityregex.test(value)\n                ? ''\n                : 'No puede quedar incompleto.',\n        }));\n\n        async function setInfoLocality(city, modInfo) {\n            try {\n                let { data: infolocality } = await supabase\n                    .from('localities')\n                    .select('id_locality,name,postal_code')\n                    .eq('state_id', modInfo.state_id)\n                    .eq('name', city);\n\n                setModInfo({\n                    ...modInfo,\n                    locality: infolocality[0].name,\n                    locality_id: infolocality[0].id_locality,\n                    postal_code: infolocality[0].postal_code,\n                });\n            } catch (err) {\n                console.error(err);\n            }\n            return;\n        }\n\n        setInfoLocality(value, modInfo);\n    };\n\n    let validate = (modInfo) => {\n        return Object.values(error).every((x) => x === '');\n        //si no tiene ningún mensaje de error devuelve true\n    };\n\n    // Cada vez que se modifica modInfo renderiza.\n\n    // Ciudades a cargar en el selector.\n    let [showCities, setShowCities] = useState(null);\n\n    // Función que filtra las ciudades según la provincia ingresada\n    async function getCities(idprovincia, modInfo) {\n        //modInfo.state_id\n        try {\n            let { data: infolocality } = await supabase\n                .from('localities')\n                .select('id_locality,name,postal_code')\n                .eq('state_id', idprovincia);\n\n            setShowCities(infolocality.map((e) => e.name));\n            // setAllstates(states.map(e => e.name));\n        } catch (err) {\n            console.error(err);\n        }\n        return;\n    }\n\n    // Cuando actualiza la provincia cambia las ciudades a mostrar\n    useEffect(() => {\n        if (modInfo) {\n            getCities(modInfo.state_id);\n        }\n    }, [modInfo]);\n\n    //----------------------------------------------------\n    async function handlesubmit() {\n        // Guardar datos en supabase !!!!!\n\n        if (validate()) {\n            //Update address table (si modifico dirección o localidad)\n            let modifyAddressT = async (user, modInfo) => {\n                let { error } = await supabase\n                    .from('address')\n                    .update({\n                        street: modInfo.street,\n                        street_number: modInfo.street_number,\n                        floor: modInfo.floor,\n                        department: modInfo.department,\n                        locality_id: modInfo.locality_id,\n                    })\n                    .eq('partner_dni', user.dni);\n                if (error) console.log(error);\n            };\n\n            modifyAddressT(user, modInfo);\n            setModify(false);\n            setModInfo(null);\n            setUser(null);\n            let userDni = JSON.parse(localStorage.getItem('userdata')).dni;\n            fetchUserData(userDni);\n            await Swal.fire({\n                title: 'Exito!',\n                text: 'Sus datos fueron guardados',\n                icon: 'success',\n                confirmButtonText: 'OK',\n            });\n            window.location.reload();\n        }\n    }\n    //----------------------------------------------------\n    const handleFile = (e) => {\n        const file = e.target.files[0];\n        picUpload(file);\n    };\n\n    const picUpload = async (file) => {\n        const extension = file.name.slice(file.name.lastIndexOf('.'));\n        const userUid = firebase.auth().currentUser.uid;\n        try {\n            await firebase\n                .storage()\n                .ref(`users/${userUid}/profile${extension}`)\n                .put(file);\n            let imgSrc = await firebase\n                .storage()\n                .ref(`users/${userUid}/profile${extension}`)\n                .getDownloadURL();\n            let newLS = { ...userDni, avatar_url: imgSrc };\n\n            localStorage.setItem('userdata', JSON.stringify(newLS));\n            window.location.reload();\n        } catch (error) {\n            console.log(error.message);\n        }\n    };\n\n    return (\n        <div className='ProfilePage_Cont'>\n            {user && (\n                <div className='info_cont'>\n                    {!modify ? (\n                        // Si no modifica usa los datos de user.\n                        <div className='input_info'>\n                            <h1 className='title'>Mi Perfil</h1>\n                            <div className='on_line_cont'>\n                                {userDni.avatar_url ? (\n                                    <div className='one_info_cont imgContainer'>\n                                        <img\n                                            src={`${userDni.avatar_url}`}\n                                            alt='Profile pic.'\n                                        />\n                                        <div className='changeImg'>\n                                            <input\n                                                accept='image/*'\n                                                className='picUpload'\n                                                id='icon-button-file'\n                                                type='file'\n                                                onChange={handleFile}\n                                            />\n                                            <label htmlFor='icon-button-file'>\n                                                <IconButton\n                                                    className={\n                                                        classes.picUpload\n                                                    }\n                                                    aria-label='upload picture'\n                                                    component='span'\n                                                >\n                                                    Cambiar Imagen\n                                                </IconButton>\n                                            </label>\n                                        </div>\n                                    </div>\n                                ) : (\n                                    <div className='one_info_cont imgContainer'>\n                                        <AccountCircleRounded />\n                                        <div className='changeImg'>\n                                            <input\n                                                accept='image/*'\n                                                className='picUpload'\n                                                id='icon-button-file'\n                                                type='file'\n                                                onChange={handleFile}\n                                            />\n                                            <label htmlFor='icon-button-file'>\n                                                <IconButton\n                                                    className={\n                                                        classes.picUpload\n                                                    }\n                                                    aria-label='upload picture'\n                                                    component='span'\n                                                >\n                                                    Cambiar Imagen\n                                                </IconButton>\n                                            </label>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                            <div className='on_line_cont'>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Nombre:</p>\n                                    <p className='profile_info'>{user.name}</p>\n                                </div>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Apellido:</p>\n                                    <p className='profile_info'>\n                                        {user.lastname}\n                                    </p>\n                                </div>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Edad:</p>\n                                    <p className='profile_info'>\n                                        {getAge(user.birthdate)}\n                                    </p>\n                                </div>\n                            </div>\n                            <div className='on_line_cont'>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>\n                                        F. Nacimiento:\n                                    </p>\n                                    <p className='profile_info'>\n                                        {user.birthdate}\n                                    </p>\n                                </div>\n                            </div>\n                            <div className='on_line_cont'>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>email:</p>\n                                    <p className='profile_info'>{user.email}</p>\n                                </div>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Teléfono:</p>\n                                    <p className='profile_info'>{user.phone}</p>\n                                </div>\n                            </div>\n                            <div className='on_line_cont'>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Calle:</p>\n                                    <p className='profile_info'>\n                                        {' '}\n                                        {user.street}\n                                    </p>\n                                </div>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Número:</p>\n                                    <p className='profile_info'>\n                                        {' '}\n                                        {user.street_number}\n                                    </p>\n                                </div>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Piso:</p>\n                                    <p className='profile_info'>\n                                        {' '}\n                                        {user.floor}\n                                    </p>\n                                </div>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Dto:</p>\n                                    <p className='profile_info'>\n                                        {' '}\n                                        {user.department}\n                                    </p>\n                                </div>\n                            </div>\n                            <div className='on_line_cont'>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Ciudad:</p>\n                                    <p className='profile_info'>\n                                        {user.locality}\n                                    </p>\n                                </div>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>\n                                        Código Postal:\n                                    </p>\n                                    <p className='profile_info'>\n                                        {user.postal_code}\n                                    </p>\n                                </div>\n                            </div>\n                            <div className='on_line_cont'>\n                                <div className='one_info_cont'>\n                                    <p className='profile_title'>Provincia:</p>\n                                    <p className='profile_info'>{user.state}</p>\n                                </div>\n                            </div>\n                        </div>\n                    ) : (\n                        // Si modifica usa los datos de modInfo.\n                        <>\n                            {modInfo && (\n                                <div className='modif_info'>\n                                    <form\n                                        className='mod_form_cont'\n                                        noValidate\n                                        autoComplete='off'\n                                    >\n                                        <div className='form_left_col'>\n                                            <TextField\n                                                name='street'\n                                                id='streetInput'\n                                                className={classes.modInput}\n                                                label='Calle'\n                                                variant='outlined'\n                                                defaultValue={modInfo.street}\n                                                onChange={handlechange}\n                                                error={error.street}\n                                                helperText={error.street}\n                                            />\n                                            <TextField\n                                                name='street_number'\n                                                id='street_numberInput'\n                                                className={classes.modInput}\n                                                label='Número'\n                                                variant='outlined'\n                                                defaultValue={\n                                                    modInfo.street_number\n                                                }\n                                                onChange={handlechange}\n                                                error={error.street_number}\n                                                helperText={error.street_number}\n                                            />\n                                            <TextField\n                                                name='floor'\n                                                id='floorInput'\n                                                className={classes.modInput}\n                                                label='Piso'\n                                                variant='outlined'\n                                                defaultValue={modInfo.floor}\n                                                onChange={handlechange}\n                                            />\n                                            <TextField\n                                                name='department'\n                                                id='departmentInput'\n                                                className={classes.modInput}\n                                                label='Departamento'\n                                                variant='outlined'\n                                                defaultValue={\n                                                    modInfo.department\n                                                }\n                                                onChange={handlechange}\n                                            />\n                                            <TextField\n                                                name='email'\n                                                id='emailInput'\n                                                className={classes.modInput}\n                                                label='email'\n                                                variant='outlined'\n                                                defaultValue={modInfo.email}\n                                                onChange={handlechange}\n                                                error={error.email}\n                                                helperText={error.email}\n                                            />\n                                        </div>\n\n                                        <div className='form_right_col'>\n                                            <TextField\n                                                name='phone'\n                                                id='phoneInput'\n                                                className={classes.modInput}\n                                                defaultValue={modInfo.phone}\n                                                label='Teléfono'\n                                                variant='outlined'\n                                                onChange={handlechange}\n                                                error={error.phone}\n                                                helperText={error.phone}\n                                            />\n\n                                            <TextField\n                                                id='stateInput'\n                                                select\n                                                label='Provincia'\n                                                value={modInfo.state}\n                                                onChange={handlechange}\n                                                // helperText=\"Seleccione una provincia\"\n                                                variant='outlined'\n                                                name='state'\n                                                className={classes.selInput}\n                                            >\n                                                {allstates &&\n                                                    allstates.map(\n                                                        (state, index) => (\n                                                            <option\n                                                                className='inputSel'\n                                                                key={index}\n                                                                value={\n                                                                    state.state_name\n                                                                }\n                                                            >\n                                                                {\n                                                                    state.state_name\n                                                                }\n                                                            </option>\n                                                        )\n                                                    )}\n                                            </TextField>\n\n                                            {/* cities */}\n                                            {showCities && (\n                                                <Autocomplete\n                                                    id='cityInput'\n                                                    name='locality'\n                                                    //  Acá va el arreglo a mostrar en el selector\n                                                    options={showCities}\n                                                    autoHighlight\n                                                    label='Localidad'\n                                                    value={modInfo.locality}\n                                                    variant='outlined'\n                                                    onChange={handlechange2}\n                                                    className={\n                                                        classes.autoInput\n                                                    }\n                                                    getOptionLabel={(option) =>\n                                                        option\n                                                    }\n                                                    error={error.locality}\n                                                    helperText={error.locality}\n                                                    renderOption={(option) =>\n                                                        option\n                                                    }\n                                                    renderInput={(params) => (\n                                                        <TextField\n                                                            id='cityInputopt'\n                                                            name='cityOpt'\n                                                            {...params}\n                                                            label='Localidad'\n                                                            variant='outlined'\n                                                            inputProps={{\n                                                                ...params.inputProps,\n                                                                autoComplete:\n                                                                    'new-password', // disable autocomplete and autofill\n                                                            }}\n                                                        />\n                                                    )}\n                                                />\n                                            )}\n\n                                            <TextField\n                                                name='postal_code'\n                                                className={classes.modInput}\n                                                label='Código Postal'\n                                                variant='outlined'\n                                                defaultValue={\n                                                    modInfo.postal_code\n                                                }\n                                                value={modInfo.postal_code}\n                                                onChange={handlechange}\n                                                error={error.postal_code}\n                                                helperText={error.postal_code}\n                                            />\n                                            <Button\n                                                id='savebtn'\n                                                disabled={!validate()}\n                                                variant='contained'\n                                                className={classes.modButton}\n                                                onClick={handlesubmit}\n                                            >\n                                                Guardar\n                                            </Button>\n                                        </div>\n                                    </form>\n                                </div>\n                            )}\n                        </>\n                    )}\n                    {!modify && (\n                        <Button\n                            id='modbtn'\n                            variant='contained'\n                            className={classes.modButton}\n                            onClick={handleclick}\n                        >\n                            Modificar\n                        </Button>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}