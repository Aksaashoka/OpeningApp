{"ast":null,"code":"var _jsxFileName = \"/home/alan/Escritorio/Integra/IntegraApp/src/components/Affiliate/UserMedRec/RenderPDF.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport '@firebase/firestore';\nimport '@firebase/auth';\nimport '@firebase/storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction RenderPDF({\n  firebase\n}) {\n  _s();\n\n  const [urlFile, setUrlFile] = useState(null);\n  const storage = firebase.storage();\n  const medRecRef = storage.ref('medical_records_affiliates');\n  const userData = JSON.parse(localStorage.getItem('userdata'));\n  const fileName = `${userData.dni}.pdf`;\n  const fileRef = medRecRef.child(fileName);\n\n  const handleRedirect = async () => {\n    const url = await fileRef.getDownloadURL();\n    setUrlFile(url);\n  };\n\n  useEffect(() => {\n    if (typeof window.orientation !== 'undefined') {\n      document.getElementById('descargaPdf').click();\n      window.close();\n    }\n\n    handleRedirect(); //eslint-disable-next-line\n  }, []);\n  if (!urlFile) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: '100%',\n      height: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 13\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      width: '100%',\n      height: '100%'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"object\", {\n      data: urlFile,\n      type: \"application/pdf\",\n      width: \"100%\",\n      height: \"100%\",\n      \"aria-label\": \"Error loading PDF\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: urlFile,\n        id: \"descargaPdf\",\n        download: \"mymedicalrecords.pdf\",\n        children: \"Tu dispositivo no puede visualizar el archivo, da click aqui para descargarlo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n}\n\n_s(RenderPDF, \"sndC6YNJxMQa02UqknM7GQGkg60=\");\n\n_c = RenderPDF;\nexport default RenderPDF;\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderPDF\");","map":{"version":3,"sources":["/home/alan/Escritorio/Integra/IntegraApp/src/components/Affiliate/UserMedRec/RenderPDF.jsx"],"names":["React","useEffect","useState","CircularProgress","RenderPDF","firebase","urlFile","setUrlFile","storage","medRecRef","ref","userData","JSON","parse","localStorage","getItem","fileName","dni","fileRef","child","handleRedirect","url","getDownloadURL","window","orientation","document","getElementById","click","close","display","alignItems","justifyContent","width","height","position"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAO,qBAAP;AACA,OAAO,gBAAP;AACA,OAAO,mBAAP;;;AAEA,SAASC,SAAT,CAAmB;AAAEC,EAAAA;AAAF,CAAnB,EAAiC;AAAA;;AAC7B,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBL,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAMM,OAAO,GAAGH,QAAQ,CAACG,OAAT,EAAhB;AACA,QAAMC,SAAS,GAAGD,OAAO,CAACE,GAAR,CAAY,4BAAZ,CAAlB;AACA,QAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAjB;AACA,QAAMC,QAAQ,GAAI,GAAEL,QAAQ,CAACM,GAAI,MAAjC;AACA,QAAMC,OAAO,GAAGT,SAAS,CAACU,KAAV,CAAgBH,QAAhB,CAAhB;;AAEA,QAAMI,cAAc,GAAG,YAAY;AAC/B,UAAMC,GAAG,GAAG,MAAMH,OAAO,CAACI,cAAR,EAAlB;AACAf,IAAAA,UAAU,CAACc,GAAD,CAAV;AACH,GAHD;;AAIApB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,OAAOsB,MAAM,CAACC,WAAd,KAA8B,WAAlC,EAA+C;AAC3CC,MAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC;AACAJ,MAAAA,MAAM,CAACK,KAAP;AACH;;AACDR,IAAAA,cAAc,GALF,CAMZ;AACH,GAPQ,EAON,EAPM,CAAT;AASA,MAAI,CAACd,OAAL,EACI,oBACI;AACI,IAAA,KAAK,EAAE;AACHuB,MAAAA,OAAO,EAAE,MADN;AAEHC,MAAAA,UAAU,EAAE,QAFT;AAGHC,MAAAA,cAAc,EAAE,QAHb;AAIHC,MAAAA,KAAK,EAAE,MAJJ;AAKHC,MAAAA,MAAM,EAAE;AALL,KADX;AAAA,2BASI,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AATJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAcJ,sBACI;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,QAAQ,EAAE,UAAZ;AAAwBF,MAAAA,KAAK,EAAE,MAA/B;AAAuCC,MAAAA,MAAM,EAAE;AAA/C,KAAZ;AAAA,2BACI;AACI,MAAA,IAAI,EAAE3B,OADV;AAEI,MAAA,IAAI,EAAC,iBAFT;AAGI,MAAA,KAAK,EAAC,MAHV;AAII,MAAA,MAAM,EAAC,MAJX;AAKI,oBAAW,mBALf;AAAA,6BAOI;AACI,QAAA,IAAI,EAAEA,OADV;AAEI,QAAA,EAAE,EAAC,aAFP;AAGI,QAAA,QAAQ,EAAC,sBAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAoBH;;GAxDQF,S;;KAAAA,S;AA0DT,eAAeA,SAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport '@firebase/firestore';\nimport '@firebase/auth';\nimport '@firebase/storage';\n\nfunction RenderPDF({ firebase }) {\n    const [urlFile, setUrlFile] = useState(null);\n    const storage = firebase.storage();\n    const medRecRef = storage.ref('medical_records_affiliates');\n    const userData = JSON.parse(localStorage.getItem('userdata'));\n    const fileName = `${userData.dni}.pdf`;\n    const fileRef = medRecRef.child(fileName);\n\n    const handleRedirect = async () => {\n        const url = await fileRef.getDownloadURL();\n        setUrlFile(url);\n    };\n    useEffect(() => {\n        if (typeof window.orientation !== 'undefined') {\n            document.getElementById('descargaPdf').click();\n            window.close();\n        }\n        handleRedirect();\n        //eslint-disable-next-line\n    }, []);\n\n    if (!urlFile)\n        return (\n            <div\n                style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    width: '100%',\n                    height: '100vh',\n                }}\n            >\n                <CircularProgress />\n            </div>\n        );\n\n    return (\n        <div style={{ position: 'absolute', width: '100%', height: '100%' }}>\n            <object\n                data={urlFile}\n                type='application/pdf'\n                width='100%'\n                height='100%'\n                aria-label='Error loading PDF'\n            >\n                <a\n                    href={urlFile}\n                    id='descargaPdf'\n                    download='mymedicalrecords.pdf'\n                >\n                    Tu dispositivo no puede visualizar el archivo, da click aqui\n                    para descargarlo\n                </a>\n            </object>\n        </div>\n    );\n}\n\nexport default RenderPDF;\n"]},"metadata":{},"sourceType":"module"}