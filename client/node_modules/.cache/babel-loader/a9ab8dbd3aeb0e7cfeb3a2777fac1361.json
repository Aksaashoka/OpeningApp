{"ast":null,"code":"var _jsxFileName = \"/home/alan/Escritorio/Integra/IntegraApp/src/components/Affiliate/Payment/PaymentStatus.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport supabase from '../../../supabase.config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PaymentStatus(props) {\n  _s();\n\n  const userData = JSON.parse(localStorage.getItem('userdata'));\n  const [tableUpdated, setTableUpdated] = useState(false);\n\n  function getParameterByName(name, url = props.location.search) {\n    name = name.replace(/[[\\]]/g, '\\\\$&');\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n  }\n\n  const updatePayment = async () => {\n    await supabase.from('payments').update({\n      collection_id: getParameterByName('collection_id'),\n      collection_status: getParameterByName('collection_status'),\n      payment_id: getParameterByName('payment_id'),\n      external_reference: getParameterByName('external_reference'),\n      payment_type: getParameterByName('payment_type'),\n      merchant_order_id: getParameterByName('merchant_order_id'),\n      site_id: getParameterByName('site_id'),\n      processing_mode: getParameterByName('processing_mode'),\n      merchant_account_id: getParameterByName('merchant_account_id'),\n      payed: true\n    }).eq('preference_id', getParameterByName('preference_id'));\n    setTableUpdated(true);\n  };\n\n  updatePayment();\n\n  if (tableUpdated) {\n    props.history.replace('/' + userData.dni + '/affiliate/payment');\n  } // return <Redirect to={\"/\" + userData.dni + \"/affiliate/payment\"} />; SI SE DESCOMENTA ESTO HAY QUE COMENTAR EL IF\n\n\n  return /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 12\n  }, this);\n}\n\n_s(PaymentStatus, \"8KXT074/M/asoDWx+Yk6ZWNshIs=\");\n\n_c = PaymentStatus;\nexport default PaymentStatus;\n\nvar _c;\n\n$RefreshReg$(_c, \"PaymentStatus\");","map":{"version":3,"sources":["/home/alan/Escritorio/Integra/IntegraApp/src/components/Affiliate/Payment/PaymentStatus.jsx"],"names":["React","useState","supabase","PaymentStatus","props","userData","JSON","parse","localStorage","getItem","tableUpdated","setTableUpdated","getParameterByName","name","url","location","search","replace","regex","RegExp","results","exec","decodeURIComponent","updatePayment","from","update","collection_id","collection_status","payment_id","external_reference","payment_type","merchant_order_id","site_id","processing_mode","merchant_account_id","payed","eq","history","dni"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,QAAP,MAAqB,0BAArB;;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAC1B,QAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAjB;AAEA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCV,QAAQ,CAAC,KAAD,CAAhD;;AAEA,WAASW,kBAAT,CAA4BC,IAA5B,EAAkCC,GAAG,GAAGV,KAAK,CAACW,QAAN,CAAeC,MAAvD,EAA+D;AAC3DH,IAAAA,IAAI,GAAGA,IAAI,CAACI,OAAL,CAAa,QAAb,EAAuB,MAAvB,CAAP;AACA,QAAIC,KAAK,GAAG,IAAIC,MAAJ,CAAW,SAASN,IAAT,GAAgB,mBAA3B,CAAZ;AAAA,QACIO,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWP,GAAX,CADd;AAEA,QAAI,CAACM,OAAL,EAAc,OAAO,IAAP;AACd,QAAI,CAACA,OAAO,CAAC,CAAD,CAAZ,EAAiB,OAAO,EAAP;AACjB,WAAOE,kBAAkB,CAACF,OAAO,CAAC,CAAD,CAAP,CAAWH,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAzB;AACH;;AAED,QAAMM,aAAa,GAAG,YAAY;AAC9B,UAAMrB,QAAQ,CACTsB,IADC,CACI,UADJ,EAEDC,MAFC,CAEM;AACJC,MAAAA,aAAa,EAAEd,kBAAkB,CAAC,eAAD,CAD7B;AAEJe,MAAAA,iBAAiB,EAAEf,kBAAkB,CAAC,mBAAD,CAFjC;AAGJgB,MAAAA,UAAU,EAAEhB,kBAAkB,CAAC,YAAD,CAH1B;AAIJiB,MAAAA,kBAAkB,EAAEjB,kBAAkB,CAAC,oBAAD,CAJlC;AAKJkB,MAAAA,YAAY,EAAElB,kBAAkB,CAAC,cAAD,CAL5B;AAMJmB,MAAAA,iBAAiB,EAAEnB,kBAAkB,CAAC,mBAAD,CANjC;AAOJoB,MAAAA,OAAO,EAAEpB,kBAAkB,CAAC,SAAD,CAPvB;AAQJqB,MAAAA,eAAe,EAAErB,kBAAkB,CAAC,iBAAD,CAR/B;AASJsB,MAAAA,mBAAmB,EAAEtB,kBAAkB,CAAC,qBAAD,CATnC;AAUJuB,MAAAA,KAAK,EAAE;AAVH,KAFN,EAcDC,EAdC,CAcE,eAdF,EAcmBxB,kBAAkB,CAAC,eAAD,CAdrC,CAAN;AAgBAD,IAAAA,eAAe,CAAC,IAAD,CAAf;AACH,GAlBD;;AAoBAY,EAAAA,aAAa;;AAEb,MAAIb,YAAJ,EAAkB;AACdN,IAAAA,KAAK,CAACiC,OAAN,CAAcpB,OAAd,CAAsB,MAAMZ,QAAQ,CAACiC,GAAf,GAAqB,oBAA3C;AACH,GAtCyB,CAwC1B;;;AACA,sBAAO;AAAA;AAAA;AAAA;AAAA,UAAP;AACH;;GA1CQnC,a;;KAAAA,a;AA4CT,eAAeA,aAAf","sourcesContent":["import React, { useState } from 'react';\nimport supabase from '../../../supabase.config';\n\nfunction PaymentStatus(props) {\n    const userData = JSON.parse(localStorage.getItem('userdata'));\n\n    const [tableUpdated, setTableUpdated] = useState(false);\n\n    function getParameterByName(name, url = props.location.search) {\n        name = name.replace(/[[\\]]/g, '\\\\$&');\n        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n            results = regex.exec(url);\n        if (!results) return null;\n        if (!results[2]) return '';\n        return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n    }\n\n    const updatePayment = async () => {\n        await supabase\n            .from('payments')\n            .update({\n                collection_id: getParameterByName('collection_id'),\n                collection_status: getParameterByName('collection_status'),\n                payment_id: getParameterByName('payment_id'),\n                external_reference: getParameterByName('external_reference'),\n                payment_type: getParameterByName('payment_type'),\n                merchant_order_id: getParameterByName('merchant_order_id'),\n                site_id: getParameterByName('site_id'),\n                processing_mode: getParameterByName('processing_mode'),\n                merchant_account_id: getParameterByName('merchant_account_id'),\n                payed: true,\n            })\n            .eq('preference_id', getParameterByName('preference_id'));\n\n        setTableUpdated(true);\n    };\n\n    updatePayment();\n\n    if (tableUpdated) {\n        props.history.replace('/' + userData.dni + '/affiliate/payment');\n    }\n\n    // return <Redirect to={\"/\" + userData.dni + \"/affiliate/payment\"} />; SI SE DESCOMENTA ESTO HAY QUE COMENTAR EL IF\n    return <p></p>;\n}\n\nexport default PaymentStatus;\n"]},"metadata":{},"sourceType":"module"}