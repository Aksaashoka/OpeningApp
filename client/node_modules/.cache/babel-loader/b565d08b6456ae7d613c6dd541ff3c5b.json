{"ast":null,"code":"var _jsxFileName = \"/home/alan/Escritorio/Integra/IntegraApp/src/components/Medic/MedicPatients/MedicPatients.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport supabase from '../../../supabase.config.js';\nimport styles from './MedicPatients.module.css';\nimport calculateAge from '../../../functions/calculateAge';\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content'; // Material-UI components\n\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useTheme } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItem from '@material-ui/core/ListItem';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Slide from '@material-ui/core/Slide'; // Material-UI icons\n\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Transition = /*#__PURE__*/React.forwardRef(_c = function Transition(props, ref) {\n  return /*#__PURE__*/_jsxDEV(Slide, {\n    direction: \"up\",\n    ref: ref,\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 12\n  }, this);\n});\n_c2 = Transition;\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    position: 'relative',\n    background: '#00897B'\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flex: 1\n  },\n  buttonPatient: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n    width: '100%',\n    border: '1px solid #2c7f7b',\n    color: '#fafafa',\n    fontWeight: 'bold',\n    backgroundColor: '#2c7f7b',\n    '&hover': {\n      backgroundColor: 'red',\n      color: 'red'\n    }\n  },\n  closeButton: {\n    color: '#00897B',\n    border: '1px solid #00897B',\n    height: '42px'\n  },\n  newButton: {\n    color: '#fff',\n    background: '#00897B'\n  },\n  closeStudy: {\n    color: '#00897B'\n  },\n  nuevo: {}\n}));\n\nfunction MedicPatients() {\n  _s();\n\n  const classes = useStyles();\n  const [listPatients, setListPatients] = useState([]);\n  const [open, setOpen] = useState(false);\n  const [currentPatient, setCurrentPatient] = useState('');\n  const [searchDni, setSearchDni] = useState('');\n  const [listStudies, setListStudies] = useState([]);\n  const [openStudy, setOpenStudy] = useState(false);\n  const [studyDetails, setStudyDetails] = useState('');\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n  const medicData = JSON.parse(localStorage.getItem('medicdata'));\n  const dniPatients = medicData.my_patients.map(el => el.partner_dni);\n  const MySwal = withReactContent(Swal);\n\n  const handleOpenStudy = study => {\n    setStudyDetails(study);\n    setOpenStudy(true);\n  };\n\n  const handleCloseStudy = () => {\n    setOpenStudy(false);\n  };\n\n  const fetchPatients = async () => {\n    let hasError = false;\n    let messageError = '';\n    const patients = [];\n\n    for (let dni of dniPatients) {\n      const {\n        data: patientsData,\n        error: errorFetchPatients\n      } = await supabase.from('partners').select('*, pathologies_partners(date_registered, pathologies(name)))').eq('dni', dni);\n\n      if (errorFetchPatients) {\n        hasError = true;\n        messageError = errorFetchPatients.message;\n        break;\n      }\n\n      patients.push(patientsData[0]);\n    }\n\n    if (hasError) {\n      return MySwal.fire({\n        title: 'Error con el fetch de pacientes.',\n        text: `${messageError}`,\n        icon: 'error'\n      });\n    }\n\n    setListPatients(patients.filter(el => el.state === 'aceptado'));\n  };\n\n  const fetchStudies = async current => {\n    const {\n      data: studiesList,\n      error: errorFetchStudies\n    } = await supabase.from('orders').select('study_name, date, results, medical_consultations(medic_dni), order_status(name)').eq('partner_dni', current.dni);\n\n    if (errorFetchStudies) {\n      return MySwal.fire({\n        title: 'Error con el fetch de estudios.',\n        text: `${errorFetchStudies.message}`,\n        icon: 'error'\n      });\n    }\n\n    setListStudies(studiesList);\n  };\n\n  useEffect(() => {\n    fetchPatients();\n\n    if (currentPatient !== '') {\n      fetchStudies(currentPatient);\n    } // eslint-disable-next-line\n\n  }, [currentPatient]);\n\n  const handleClickOpen = indexPatient => {\n    setCurrentPatient(listPatients[indexPatient]);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleChangeDni = e => {\n    const value = e.target.value;\n    const regexDni = /^[0-9\\b]+$/;\n\n    if (regexDni.test(value) || value === '') {\n      setSearchDni(value);\n\n      if (value === '') {\n        fetchPatients();\n      }\n\n      return setListPatients(listPatients.filter(e => String(e.dni).includes(value)));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Mis pacientes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.searchbar,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        className: styles.paper,\n        children: [/*#__PURE__*/_jsxDEV(InputBase, {\n          placeholder: \"DNI\",\n          type: \"text\",\n          value: searchDni,\n          className: styles.inputSearch,\n          onChange: handleChangeDni\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.listPatients,\n      children: listPatients.map((pat, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.eachPatient,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          className: styles.buttonPatient,\n          onClick: () => handleClickOpen(idx),\n          children: [/*#__PURE__*/_jsxDEV(ListItem, {\n            children: /*#__PURE__*/_jsxDEV(ListItemText, {\n              className: classes.nuevo,\n              primary: `${pat.dni}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: `${pat.name}, ${pat.lastname}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 29\n          }, this)]\n        }, `patient-${idx}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, `divider-${idx}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }, this)]\n      }, `div-${idx}`, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      fullScreen: true,\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"Informacion del paciente\",\n      className: styles.dialog,\n      TransitionComponent: Transition,\n      children: [/*#__PURE__*/_jsxDEV(AppBar, {\n        className: classes.appBar,\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            className: classes.title,\n            children: `Paciente ${currentPatient.name} ${currentPatient.lastname}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            edge: \"end\",\n            color: \"inherit\",\n            onClick: handleClose,\n            \"aria-label\": \"close\",\n            children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(List, {\n          className: styles.completeList,\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            className: styles.dataPatient,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.titleContact,\n              children: \"Datos del paciente:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listItem,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `DNI: ${currentPatient.dni}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listItem,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `Nombre: ${currentPatient.name}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listItem,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `Apellido: ${currentPatient.lastname}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listItem,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `Edad: ${calculateAge(currentPatient.birthdate)}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listItem,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `Genero: ${currentPatient.gender}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: styles.dataContact,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.titleContact,\n              children: \"Datos de contacto:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listContact,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `Email: ${currentPatient.email}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listContact,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `Telefono: ${currentPatient.phone_number}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: styles.pathologies,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.titleContact,\n              children: \"Patologias existentes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this), currentPatient && currentPatient.pathologies_partners.length === 0 ? /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listPathology,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `Ninguna registrada hasta la fecha.`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 33\n            }, this) : currentPatient && currentPatient.pathologies_partners.map(pathology => /*#__PURE__*/_jsxDEV(ListItem, {\n              className: styles.listPathology,\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: `${pathology.pathologies.name}`,\n                secondary: `Registrada desde ${pathology.date_registered}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 41\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: styles.orders,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.titleContact,\n              children: \"Estudios recientes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 29\n            }, this), listStudies.length === 0 ? /*#__PURE__*/_jsxDEV(ListItem, {\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                className: styles.listColumn,\n                primary: `Ningun estudio hasta la fecha.`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 33\n            }, this) : listStudies.map((study, idx) => /*#__PURE__*/_jsxDEV(\"article\", {\n              className: styles.listStudies,\n              children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                className: styles.listColumn,\n                children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: `Estudio`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: `${study.study_name}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                className: styles.listColumn,\n                children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: `Fecha del estudio`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: `${study.date}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                className: styles.listColumn,\n                children: study.order_status.name === 'Realizada' ? /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"#!\",\n                  onClick: () => handleOpenStudy(study),\n                  className: styles.studyDetails,\n                  children: \"Ver detalles del estudio\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 49\n                }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: styles.studyDetailsParagraph,\n                  children: \"En proceso...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 41\n              }, this)]\n            }, `study-${idx}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 37\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        className: styles.buttonsDialog,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          autoFocus: true,\n          onClick: handleClose,\n          className: classes.closeButton,\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: `/${medicData.dni}/patients/${currentPatient.dni}/newconsultation?dni=${currentPatient.dni}&name=${currentPatient.name}&lastname=${currentPatient.lastname}&birthdate=${currentPatient.birthdate}&gender=${currentPatient.gender}&email=${currentPatient.email}`,\n          target: \"_blank\",\n          rel: \"noreferrer\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            size: \"large\",\n            className: classes.newButton,\n            onClick: handleClose,\n            autoFocus: true,\n            children: \"Nueva Consulta\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }, this), studyDetails === '' ? null : /*#__PURE__*/_jsxDEV(Dialog, {\n      fullScreen: fullScreen,\n      open: openStudy,\n      onClose: handleCloseStudy,\n      \"aria-labelledby\": \"responsive-dialog-title\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"responsive-dialog-title\",\n        style: {\n          textTransform: 'capitalize'\n        },\n        children: `${studyDetails.study_name} de ${currentPatient.name} ${currentPatient.lastname}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: `${studyDetails.results.name}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: `Realizado y evaluado por: ${studyDetails.results.results.medic_name}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: `Realizado el dia, mes y año: ${studyDetails.results.results.date}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DialogContentText, {\n          children: `Resultados:`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DialogContentText, {\n          style: {\n            whiteSpace: 'pre'\n          },\n          children: `${studyDetails.results.results.results.replace(/\\|/g, '\\n')}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseStudy,\n          className: classes.closeStudy,\n          autoFocus: true,\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MedicPatients, \"ptZ06erZ1QSjZzCaBZb9AyWieNg=\", false, function () {\n  return [useStyles, useTheme, useMediaQuery];\n});\n\n_c3 = MedicPatients;\nexport default MedicPatients;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Transition$React.forwardRef\");\n$RefreshReg$(_c2, \"Transition\");\n$RefreshReg$(_c3, \"MedicPatients\");","map":{"version":3,"sources":["/home/alan/Escritorio/Integra/IntegraApp/src/components/Medic/MedicPatients/MedicPatients.jsx"],"names":["React","useState","useEffect","supabase","styles","calculateAge","Swal","withReactContent","useMediaQuery","useTheme","Paper","DialogContentText","DialogTitle","makeStyles","InputBase","IconButton","Button","Dialog","DialogActions","DialogContent","ListItemText","ListItem","List","Divider","AppBar","Toolbar","Typography","Slide","SearchIcon","CloseIcon","Transition","forwardRef","props","ref","useStyles","theme","appBar","position","background","title","marginLeft","spacing","flex","buttonPatient","display","justifyContent","alignItems","width","border","color","fontWeight","backgroundColor","closeButton","height","newButton","closeStudy","nuevo","MedicPatients","classes","listPatients","setListPatients","open","setOpen","currentPatient","setCurrentPatient","searchDni","setSearchDni","listStudies","setListStudies","openStudy","setOpenStudy","studyDetails","setStudyDetails","fullScreen","breakpoints","down","medicData","JSON","parse","localStorage","getItem","dniPatients","my_patients","map","el","partner_dni","MySwal","handleOpenStudy","study","handleCloseStudy","fetchPatients","hasError","messageError","patients","dni","data","patientsData","error","errorFetchPatients","from","select","eq","message","push","fire","text","icon","filter","state","fetchStudies","current","studiesList","errorFetchStudies","handleClickOpen","indexPatient","handleClose","handleChangeDni","e","value","target","regexDni","test","String","includes","container","searchbar","paper","inputSearch","pat","idx","eachPatient","name","lastname","dialog","completeList","dataPatient","titleContact","listItem","birthdate","gender","dataContact","listContact","email","phone_number","pathologies","pathologies_partners","length","listPathology","pathology","date_registered","orders","listColumn","study_name","date","order_status","studyDetailsParagraph","buttonsDialog","textTransform","results","medic_name","whiteSpace","replace"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport supabase from '../../../supabase.config.js';\nimport styles from './MedicPatients.module.css';\nimport calculateAge from '../../../functions/calculateAge';\n\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\n\n// Material-UI components\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useTheme } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItem from '@material-ui/core/ListItem';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Slide from '@material-ui/core/Slide';\n\n// Material-UI icons\nimport SearchIcon from '@material-ui/icons/Search';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n    return <Slide direction='up' ref={ref} {...props} />;\n});\n\nconst useStyles = makeStyles((theme) => ({\n    appBar: {\n        position: 'relative',\n        background: '#00897B',\n    },\n    title: {\n        marginLeft: theme.spacing(2),\n        flex: 1,\n    },\n    buttonPatient: {\n        display: 'flex',\n        justifyContent: 'space-evenly',\n        alignItems: 'center',\n        width: '100%',\n        border: '1px solid #2c7f7b',\n        color: '#fafafa',\n        fontWeight: 'bold',\n        backgroundColor: '#2c7f7b',\n        '&hover': {\n            backgroundColor: 'red',\n            color: 'red',\n        },\n    },\n    closeButton: {\n        color: '#00897B',\n        border: '1px solid #00897B',\n        height: '42px',\n    },\n    newButton: {\n        color: '#fff',\n        background: '#00897B',\n    },\n    closeStudy: {\n        color: '#00897B',\n    },\n    nuevo: {},\n}));\n\nfunction MedicPatients() {\n    const classes = useStyles();\n    const [listPatients, setListPatients] = useState([]);\n    const [open, setOpen] = useState(false);\n    const [currentPatient, setCurrentPatient] = useState('');\n    const [searchDni, setSearchDni] = useState('');\n    const [listStudies, setListStudies] = useState([]);\n    const [openStudy, setOpenStudy] = useState(false);\n    const [studyDetails, setStudyDetails] = useState('');\n\n    const theme = useTheme();\n    const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n\n    const medicData = JSON.parse(localStorage.getItem('medicdata'));\n    const dniPatients = medicData.my_patients.map((el) => el.partner_dni);\n    const MySwal = withReactContent(Swal);\n\n    const handleOpenStudy = (study) => {\n        setStudyDetails(study);\n        setOpenStudy(true);\n    };\n\n    const handleCloseStudy = () => {\n        setOpenStudy(false);\n    };\n\n    const fetchPatients = async () => {\n        let hasError = false;\n        let messageError = '';\n        const patients = [];\n        for (let dni of dniPatients) {\n            const { data: patientsData, error: errorFetchPatients } =\n                await supabase\n                    .from('partners')\n                    .select(\n                        '*, pathologies_partners(date_registered, pathologies(name)))'\n                    )\n                    .eq('dni', dni);\n            if (errorFetchPatients) {\n                hasError = true;\n                messageError = errorFetchPatients.message;\n                break;\n            }\n            patients.push(patientsData[0]);\n        }\n        if (hasError) {\n            return MySwal.fire({\n                title: 'Error con el fetch de pacientes.',\n                text: `${messageError}`,\n                icon: 'error',\n            });\n        }\n        setListPatients(patients.filter((el) => el.state === 'aceptado'));\n    };\n\n    const fetchStudies = async (current) => {\n        const { data: studiesList, error: errorFetchStudies } = await supabase\n            .from('orders')\n            .select(\n                'study_name, date, results, medical_consultations(medic_dni), order_status(name)'\n            )\n            .eq('partner_dni', current.dni);\n        if (errorFetchStudies) {\n            return MySwal.fire({\n                title: 'Error con el fetch de estudios.',\n                text: `${errorFetchStudies.message}`,\n                icon: 'error',\n            });\n        }\n        setListStudies(studiesList);\n    };\n\n    useEffect(() => {\n        fetchPatients();\n        if (currentPatient !== '') {\n            fetchStudies(currentPatient);\n        }\n        // eslint-disable-next-line\n    }, [currentPatient]);\n\n    const handleClickOpen = (indexPatient) => {\n        setCurrentPatient(listPatients[indexPatient]);\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleChangeDni = (e) => {\n        const value = e.target.value;\n        const regexDni = /^[0-9\\b]+$/;\n        if (regexDni.test(value) || value === '') {\n            setSearchDni(value);\n            if (value === '') {\n                fetchPatients();\n            }\n            return setListPatients(\n                listPatients.filter((e) => String(e.dni).includes(value))\n            );\n        }\n    };\n\n    return (\n        <div className={styles.container}>\n            <h1>Mis pacientes</h1>\n            <div className={styles.searchbar}>\n                <Paper className={styles.paper}>\n                    <InputBase\n                        placeholder='DNI'\n                        type='text'\n                        value={searchDni}\n                        className={styles.inputSearch}\n                        onChange={handleChangeDni}\n                    />\n                    <SearchIcon />\n                </Paper>\n            </div>\n            <div className={styles.listPatients}>\n                {listPatients.map((pat, idx) => (\n                    <div key={`div-${idx}`} className={styles.eachPatient}>\n                        <Button\n                            variant='outlined'\n                            className={styles.buttonPatient}\n                            key={`patient-${idx}`}\n                            onClick={() => handleClickOpen(idx)}\n                        >\n                            <ListItem>\n                                <ListItemText\n                                    className={classes.nuevo}\n                                    primary={`${pat.dni}`}\n                                />\n                            </ListItem>\n                            <ListItem>\n                                <ListItemText\n                                    primary={`${pat.name}, ${pat.lastname}`}\n                                />\n                            </ListItem>\n                        </Button>\n                        <Divider key={`divider-${idx}`} />\n                    </div>\n                ))}\n            </div>\n            <Dialog\n                fullScreen\n                open={open}\n                onClose={handleClose}\n                aria-labelledby='Informacion del paciente'\n                className={styles.dialog}\n                TransitionComponent={Transition}\n            >\n                <AppBar className={classes.appBar}>\n                    <Toolbar>\n                        <Typography variant='h6' className={classes.title}>\n                            {`Paciente ${currentPatient.name} ${currentPatient.lastname}`}\n                        </Typography>\n                        <IconButton\n                            edge='end'\n                            color='inherit'\n                            onClick={handleClose}\n                            aria-label='close'\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                    </Toolbar>\n                </AppBar>\n                <DialogContent>\n                    <List className={styles.completeList}>\n                        <section className={styles.dataPatient}>\n                            <p className={styles.titleContact}>\n                                Datos del paciente:\n                            </p>\n                            <ListItem className={styles.listItem}>\n                                <ListItemText\n                                    primary={`DNI: ${currentPatient.dni}`}\n                                />\n                            </ListItem>\n                            <ListItem className={styles.listItem}>\n                                <ListItemText\n                                    primary={`Nombre: ${currentPatient.name}`}\n                                />\n                            </ListItem>\n                            <ListItem className={styles.listItem}>\n                                <ListItemText\n                                    primary={`Apellido: ${currentPatient.lastname}`}\n                                />\n                            </ListItem>\n                            <ListItem className={styles.listItem}>\n                                <ListItemText\n                                    primary={`Edad: ${calculateAge(\n                                        currentPatient.birthdate\n                                    )}`}\n                                />\n                            </ListItem>\n                            <ListItem className={styles.listItem}>\n                                <ListItemText\n                                    primary={`Genero: ${currentPatient.gender}`}\n                                />\n                            </ListItem>\n                        </section>\n                        <section className={styles.dataContact}>\n                            <p className={styles.titleContact}>\n                                Datos de contacto:\n                            </p>\n                            <ListItem className={styles.listContact}>\n                                <ListItemText\n                                    primary={`Email: ${currentPatient.email}`}\n                                />\n                            </ListItem>\n                            <ListItem className={styles.listContact}>\n                                <ListItemText\n                                    primary={`Telefono: ${currentPatient.phone_number}`}\n                                />\n                            </ListItem>\n                        </section>\n                        <section className={styles.pathologies}>\n                            <p className={styles.titleContact}>\n                                Patologias existentes\n                            </p>\n                            {currentPatient &&\n                            currentPatient.pathologies_partners.length === 0 ? (\n                                <ListItem className={styles.listPathology}>\n                                    <ListItemText\n                                        primary={`Ninguna registrada hasta la fecha.`}\n                                    />\n                                </ListItem>\n                            ) : (\n                                currentPatient &&\n                                currentPatient.pathologies_partners.map(\n                                    (pathology) => (\n                                        <ListItem\n                                            className={styles.listPathology}\n                                        >\n                                            <ListItemText\n                                                primary={`${pathology.pathologies.name}`}\n                                                secondary={`Registrada desde ${pathology.date_registered}`}\n                                            />\n                                        </ListItem>\n                                    )\n                                )\n                            )}\n                        </section>\n                        <section className={styles.orders}>\n                            <p className={styles.titleContact}>\n                                Estudios recientes\n                            </p>\n                            {listStudies.length === 0 ? (\n                                <ListItem>\n                                    <ListItemText\n                                        className={styles.listColumn}\n                                        primary={`Ningun estudio hasta la fecha.`}\n                                    />\n                                </ListItem>\n                            ) : (\n                                listStudies.map((study, idx) => (\n                                    <article\n                                        key={`study-${idx}`}\n                                        className={styles.listStudies}\n                                    >\n                                        <ListItem className={styles.listColumn}>\n                                            <ListItemText primary={`Estudio`} />\n                                            <ListItemText\n                                                primary={`${study.study_name}`}\n                                            />\n                                        </ListItem>\n                                        <ListItem className={styles.listColumn}>\n                                            <ListItemText\n                                                primary={`Fecha del estudio`}\n                                            />\n                                            <ListItemText\n                                                primary={`${study.date}`}\n                                            />\n                                        </ListItem>\n                                        <ListItem className={styles.listColumn}>\n                                            {study.order_status.name ===\n                                            'Realizada' ? (\n                                                <a\n                                                    href='#!'\n                                                    onClick={() =>\n                                                        handleOpenStudy(study)\n                                                    }\n                                                    className={\n                                                        styles.studyDetails\n                                                    }\n                                                >\n                                                    Ver detalles del estudio\n                                                </a>\n                                            ) : (\n                                                <p\n                                                    className={\n                                                        styles.studyDetailsParagraph\n                                                    }\n                                                >\n                                                    En proceso...\n                                                </p>\n                                            )}\n                                        </ListItem>\n                                    </article>\n                                ))\n                            )}\n                        </section>\n                    </List>\n                </DialogContent>\n                <DialogActions className={styles.buttonsDialog}>\n                    <Button\n                        autoFocus\n                        onClick={handleClose}\n                        className={classes.closeButton}\n                    >\n                        Cerrar\n                    </Button>\n                    <a\n                        href={`/${medicData.dni}/patients/${currentPatient.dni}/newconsultation?dni=${currentPatient.dni}&name=${currentPatient.name}&lastname=${currentPatient.lastname}&birthdate=${currentPatient.birthdate}&gender=${currentPatient.gender}&email=${currentPatient.email}`}\n                        target='_blank'\n                        rel='noreferrer'\n                    >\n                        <Button\n                            variant='contained'\n                            size='large'\n                            className={classes.newButton}\n                            onClick={handleClose}\n                            autoFocus\n                        >\n                            Nueva Consulta\n                        </Button>\n                    </a>\n                </DialogActions>\n            </Dialog>\n            {studyDetails === '' ? null : (\n                <Dialog\n                    fullScreen={fullScreen}\n                    open={openStudy}\n                    onClose={handleCloseStudy}\n                    aria-labelledby='responsive-dialog-title'\n                >\n                    <DialogTitle\n                        id='responsive-dialog-title'\n                        style={{ textTransform: 'capitalize' }}\n                    >\n                        {`${studyDetails.study_name} de ${currentPatient.name} ${currentPatient.lastname}`}\n                    </DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {`${studyDetails.results.name}`}\n                        </DialogContentText>\n                        <DialogContentText>\n                            {`Realizado y evaluado por: ${studyDetails.results.results.medic_name}`}\n                        </DialogContentText>\n                        <DialogContentText>\n                            {`Realizado el dia, mes y año: ${studyDetails.results.results.date}`}\n                        </DialogContentText>\n                        <DialogContentText>{`Resultados:`}</DialogContentText>\n                        <DialogContentText style={{ whiteSpace: 'pre' }}>\n                            {`${studyDetails.results.results.results.replace(\n                                /\\|/g,\n                                '\\n'\n                            )}`}\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button\n                            onClick={handleCloseStudy}\n                            className={classes.closeStudy}\n                            autoFocus\n                        >\n                            Cerrar\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            )}\n        </div>\n    );\n}\n\nexport default MedicPatients;\n"]},"metadata":{},"sourceType":"module"}